<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>xtool · Harmonie wiki</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit">Harmonie wiki</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Running at ECMWF and local</span><ul><li><a class="tocitem" href="../../Harmonie-mSMS/">Running at ECMWF</a></li><li><a class="tocitem" href="../../Fast_start_on_cca/">Fast start on cca</a></li><li><a class="tocitem" href="../../QuickStartLocal/">Quick start local</a></li></ul></li><li><span class="tocitem">Installation</span><ul><li><a class="tocitem" href="../../Installation/">Installation</a></li><li><a class="tocitem" href="../../General/">General Software Requirements</a></li><li><a class="tocitem" href="../../Build_with_makeup/">Makeup</a></li><li><a class="tocitem" href="../../StandaloneOdb/">Stand Alone ODB</a></li><li><a class="tocitem" href="../../Redhat7Install/">Redhat7</a></li><li><a class="tocitem" href="../../Centos6Install/">Centos6</a></li></ul></li><li><a class="tocitem" href="../../TheHarmonieScript/">The Harmonie Script</a></li><li><a class="tocitem" href="../../DrHook/">Profiling and Traceback</a></li><li><a class="tocitem" href="../../FileFormats/">File Formats</a></li><li><span class="tocitem">Job Scheduling</span><ul><li><a class="tocitem" href="../../ECFLOW/">ECFlow</a></li><li><a class="tocitem" href="../../scripts/mXCdp/">mXCdp</a></li><li><a class="tocitem" href="../../scripts/mSMS/">mSMS</a></li></ul></li><li><span class="tocitem">Testbed and Mitraillette</span><ul><li><a class="tocitem" href="../../Evaluation/HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../../Evaluation/Mitraillette/">Mitraillette</a></li></ul></li><li><span class="tocitem">Directories  and Binaries</span><ul><li><a class="tocitem" href="../../Content/">Directories</a></li><li><a class="tocitem" href="../../Binaries/">Binaries</a></li></ul></li><li><span class="tocitem">Configuration</span><ul><li><a class="tocitem" href="../../ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../../PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../../Namelists/">Namelist</a></li><li><a class="tocitem" href="../../UpdateNamelists/">Update Namelist</a></li><li><a class="tocitem" href="../../ModelDomain/">Model Domain</a></li><li><a class="tocitem" href="../../VerticalGrid/">Vertical Grid</a></li><li><a class="tocitem" href="../../ClimateSimulation/">Climate Simulation</a></li><li><a class="tocitem" href="../../How_to_use_hires_topography/">Hires topography</a></li></ul></li><li><span class="tocitem">ECFlow tasks</span><ul><li><a class="tocitem" href="../../ClimateGeneration/">Climate</a></li><li><input class="collapse-toggle" id="menuitem-11-2" type="checkbox"/><label class="tocitem" for="menuitem-11-2"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../UseofObservation/">Use of Observation</a></li><li><a class="tocitem" href="../../ObservationOperators/">Observation operators</a></li><li><a class="tocitem" href="../../ObservationHowto/GNSS/">GNSS ZTD observations</a></li><li><a class="tocitem" href="../../ObservationHowto/Amv/">Atmospheric Motion Vectors (AMV)</a></li><li><a class="tocitem" href="../../RadarData/">Assimilation of Radar Data</a></li><li><input class="collapse-toggle" id="menuitem-11-2-6" type="checkbox"/><label class="tocitem" for="menuitem-11-2-6"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ObservationPreprocessing/ObservationData/">Observation data</a></li><li><a class="tocitem" href="../../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../../ObservationPreprocessing/Cope/">Cope</a></li></ul></li></ul></li><li><a class="tocitem" href="../../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../../BoundaryFilePreparation/">Boundaries</a></li><li><a class="tocitem" href="../../Screening/">Screening</a></li><li><a class="tocitem" href="../../Analysis/SurfaceAnalysis/">Surface Analysis</a></li><li><a class="tocitem" href="../../DigitialFilterInitialization/">DFI</a></li><li><a class="tocitem" href="../../Forecast/">Forecast</a></li><li><input class="collapse-toggle" id="menuitem-11-10" type="checkbox" checked/><label class="tocitem" for="menuitem-11-10"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Obsmon/">Obsmon</a></li><li><a class="tocitem" href="../Diagnostics/">Diagnostics</a></li><li class="is-active"><a class="tocitem" href>xtool</a><ul class="internal"><li><a class="tocitem" href="#xtool-1"><span>xtool</span></a></li><li><a class="tocitem" href="#DIFF-1"><span>DIFF</span></a></li><li><a class="tocitem" href="#SAL-1"><span>SAL</span></a></li></ul></li><li><a class="tocitem" href="../gl/Interpolation/">GL interpolation</a></li><li><input class="collapse-toggle" id="menuitem-11-10-5" type="checkbox"/><label class="tocitem" for="menuitem-11-10-5"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Verification/">HARMONIE Verification</a></li><li><a class="tocitem" href="../Extract4verification/">-</a></li></ul></li><li><a class="tocitem" href="../Fullpos/">Fullpos</a></li><li><a class="tocitem" href="../FileConversions/">FileConversion</a></li><li><a class="tocitem" href="../gl_grib_api/">gl<em>grib</em>api</a></li></ul></li></ul></li><li><span class="tocitem">Other</span><ul><li><a class="tocitem" href="../../Scalability_and_Refactoring/">Scalability and refactoring</a></li><li><a class="tocitem" href="../../HarmonieBenchMark/">Harmonie RAPS benchmark</a></li><li><a class="tocitem" href="../../MFaccess/">Using Météo-France Servers</a></li><li><a class="tocitem" href="../../Phasing/">Phasing information</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">ECFlow tasks</a></li><li><a class="is-disabled">Post Processing</a></li><li class="is-active"><a href>xtool</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>xtool</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://hirlam.org/trac//wiki//HarmonieSystemDocumentation/PostPP/xtool?action=edit" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Post-processing-with-xtool-1"><a class="docs-heading-anchor" href="#Post-processing-with-xtool-1">Post processing with xtool</a><a class="docs-heading-anchor-permalink" href="#Post-processing-with-xtool-1" title="Permalink"></a></h1><h2 id="xtool-1"><a class="docs-heading-anchor" href="#xtool-1">xtool</a><a class="docs-heading-anchor-permalink" href="#xtool-1" title="Permalink"></a></h2><p><strong>Xtool</strong>, part of the <strong>gl</strong> package, provides a utility to calculate differences between GRIB/FA files and produce the result in a new GRIB file. See xtool part of <a href="https://hirlam.org/trac/browser/Harmonie/util/gl/README#L221">gl-README</a>. The main commands are:</p><pre><code class="language-bash"> 
                          xtool                                 
 
 Simple usage:                                                  
  xtool -f1 FILE1 [ -fN FILEN] -op OPERATOR [ -o OFILE]       
  i.e. apply OPERATOR on FILEN and output to OFILE              
  operator is one of SUM/DIFF/AVE/STDV/RMS/MS                      
  1 file : SUM/AVE/SQR                                          
  2 files: SUM/AVE/PROD/DIFF/RMSE/STDV/SAL                      
  3 files: DIFF/SAL                                             
 
 Accumulated usage:                                             
  xtool -sdtg1 YYYYMMDDHH -edtg1 YYYYMMDDHH -ll1 LLL -ll2 LLL \ 
        -p1 PATH1 -p2 PATH2 -fcint HH -op OPERATOR              
  i.e. accumulate OPERATOR on FILE1 and FILE2 during the period 
  sdtg1 to edtg1 with step of fcint.                            
  sdtg2/edtg2=sdtg1/edtg2 - (LL1-LL2) unless given              
 
 Time information in the path should be given as                
  -p1 /data/test/fc@YYYY@@MM@@DD@@HH@+@LLL@ or something like   
  -p2 /data/@YYYY@/@MM@/@DD@/@HH@/fc@YYYY@@MM@@DD@_@HH@+@LLL@   
 
 Different parameters can be compared by using the xkey         
 variable in the namelist                                       
 
 Flag summary :                                                 
  -h                : Print this help                           
  -fN FILE          : Single file name                          
  -pN PATH          : Path name                                 
  -sdtgN YYYYMMDDHH : Start date/time                           
  -edtgN YYYYMMDDHH : End date/time                             
  -llN LLL          : Forecast length to use                    
  -fcint HH         : Forecast cycle interval in hours          
  -iN               : format of the input file GRIB/FA          
  -s                : Run silent                                
  -of               : Output format GRIB/FA/SCREEN              
  -g                : Prints ksec/cadre/lfi info                
  -p                : Use FA file without extension zone        
  -f                : Global FA switch                          
  -a FILE           : Accumulation file to be read              
  -n namelist       : Use namelist to set additional options    
  -igd              : Set lignore_duplicates=F                  
  -r VALUE          : Rescale the output with a constant VALUE  
 </code></pre><h2 id="DIFF-1"><a class="docs-heading-anchor" href="#DIFF-1">DIFF</a><a class="docs-heading-anchor-permalink" href="#DIFF-1" title="Permalink"></a></h2><p>One of the things xtool is useful for is to check if the result from two different experiments differ. This is done by applying the DIFF operator and writing the output to the screen like</p><pre><code class="language-bash"> xtool [-f] -f1 FILE1 -f2 FILE2 -of SCREEN</code></pre><p>The is heavily used in the <a href="../HarmonieSystemDocumentation/Evaluation/HarmonieTestbed.md">Harmonie testbed</a> to check the difference between versions of the system.</p><p>Below is a simple example of how to use <strong>xtool</strong>. You may also check the <a href="https://hirlam.org/trac/browser/Harmonie/scr/Fldver">field extraction</a> to find examples. </p><p>What is the difference between +24h and +48h MSLP forecasts during August 2008?</p><ol><li>Namelist for <strong>xtool</strong>, which lists the parameters (here mean sea level pressure) to be examined:</li></ol><pre><code class="language-bash">&amp;NAMINTERP
  PPPKEY%ppp = 001,
  PPPKEY%lll = 000,
  PPPKEY%ttt = 103,
/</code></pre><ol><li>Run xtool.</li></ol><pre><code class="language-bash">xtool -sdtg1 2008080100 -edtg1 2008083000 -ll1 48 \
      -sdtg2 2008073100 -edtg2 2008082900 -ll2 24 \
      -p1 /your_model_data/YYYY/MM/HH/fcYYYYMMDD_HH+LLL \
      -p2 /your_model_data/YYYY/MM/HH/fcYYYYMMDD_HH+LLL \
      -fcint 6 -op DIFF -n your_namelist \
      -o output.grb</code></pre><ul><li><strong>-sdtg1</strong>, <strong>-edtg1</strong>, <strong>-ll1</strong>: The cycles to look for the +48h forecast.</li><li><strong>-sdtg2</strong>, <strong>-edtg2</strong>, <strong>-ll2</strong>: The cycles to look for the +24h forecast.</li><li><strong>-p1</strong>, <strong>-p2</strong>: Naming rules for the files in cycle 1 and 2, respectively.</li><li><strong>-fcint</strong>: Interval between forecast cycles.</li><li><strong>-op</strong>: Operation to be applied. Possible choices <em>DIFF</em>, <em>SUM</em>, <em>AVE</em>, <em>STDV</em> or <em>SAL</em></li><li><strong>-n</strong>: Namelist file.</li><li><strong>-o</strong>: Name of the output grib file.</li></ul><ol><li>Output file (<strong>output.grb</strong>) now contains one 2D-field with accumulated 48-24h difference of mean sea level pressure.  </li></ol><h2 id="SAL-1"><a class="docs-heading-anchor" href="#SAL-1">SAL</a><a class="docs-heading-anchor-permalink" href="#SAL-1" title="Permalink"></a></h2><p><strong>S</strong>tructure <strong>A</strong>mplitude <strong>L</strong>ocation (<strong>SAL</strong>) is object based quality measure for the verification of QPFs (<a href="http://ams.allenpress.com/perlserv/?request=get-abstract&amp;doi=10.1175%2F2008MWR2415.1">Wernli et al., 2008</a>). <strong>SAL</strong> contains three independent components that focus on Structure, Amplitude and Location of the precipitation field in a specified domain. </p><ul><li><strong>S</strong>: Measure of structure of the precipitation area (-2 - +2). Large <strong>S</strong>, if model predicts too large precipitation areas.</li><li><strong>A</strong>: Measure of strength of the precipitation (-2 - +2). Large <strong>A</strong>, if model predicts too intense precipitation.</li><li><strong>L</strong>: Measure of location of the precipitation object (0 - +2). Large <strong>L</strong>, if modelled precipitation objects are far from the observed conterparts. </li></ul><ul><li><strong>SAL</strong> can be activated in <strong>xtool</strong> by using <em>-op SAL</em> option. e.g.</li></ul><pre><code class="language-bash"> xtool -f1 model.grib -f2 observation.grib -op SAL -n namelist</code></pre><ul><li>Output of the <strong>SAL</strong> are 2 simple ascii-files:</li></ul><ol><li><em>scatter_plot.dat</em> containing date, <strong>S</strong>,<strong>A</strong> and <strong>L</strong> parameters.</li><li><em>sal_output.dat</em> containing more detailed statistics collected during the verification (location of center of mass, number of objects, measure of object size etc.).</li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Diagnostics/">« Diagnostics</a><a class="docs-footer-nextpage" href="../gl/Interpolation/">GL interpolation »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 6 September 2021 15:20">Monday 6 September 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
