<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>- · Harmonie wiki</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit">Harmonie wiki</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Running at ECMWF and local</span><ul><li><a class="tocitem" href="../../Harmonie-mSMS/">Running at ECMWF</a></li><li><a class="tocitem" href="../../Fast_start_on_cca/">Fast start on cca</a></li><li><a class="tocitem" href="../../QuickStartLocal/">Quick start local</a></li></ul></li><li><span class="tocitem">Installation</span><ul><li><a class="tocitem" href="../../Installation/">Installation</a></li><li><a class="tocitem" href="../../General/">General Software Requirements</a></li><li><a class="tocitem" href="../../Build_with_makeup/">Makeup</a></li><li><a class="tocitem" href="../../StandaloneOdb/">Stand Alone ODB</a></li><li><a class="tocitem" href="../../Redhat7Install/">Redhat7</a></li><li><a class="tocitem" href="../../Centos6Install/">Centos6</a></li></ul></li><li><a class="tocitem" href="../../TheHarmonieScript/">The Harmonie Script</a></li><li><a class="tocitem" href="../../DrHook/">Profiling and Traceback</a></li><li><a class="tocitem" href="../../FileFormats/">File Formats</a></li><li><span class="tocitem">Job Scheduling</span><ul><li><a class="tocitem" href="../../ECFLOW/">ECFlow</a></li><li><a class="tocitem" href="../../scripts/mXCdp/">mXCdp</a></li><li><a class="tocitem" href="../../scripts/mSMS/">mSMS</a></li></ul></li><li><span class="tocitem">Testbed and Mitraillette</span><ul><li><a class="tocitem" href="../../Evaluation/HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../../Evaluation/Mitraillette/">Mitraillette</a></li></ul></li><li><span class="tocitem">Directories  and Binaries</span><ul><li><a class="tocitem" href="../../Content/">Directories</a></li><li><a class="tocitem" href="../../Binaries/">Binaries</a></li></ul></li><li><span class="tocitem">Configuration</span><ul><li><a class="tocitem" href="../../ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../../PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../../Namelists/">Namelist</a></li><li><a class="tocitem" href="../../UpdateNamelists/">Update Namelist</a></li><li><a class="tocitem" href="../../ModelDomain/">Model Domain</a></li><li><a class="tocitem" href="../../VerticalGrid/">Vertical Grid</a></li><li><a class="tocitem" href="../../ClimateSimulation/">Climate Simulation</a></li><li><a class="tocitem" href="../../How_to_use_hires_topography/">Hires topography</a></li></ul></li><li><span class="tocitem">ECFlow tasks</span><ul><li><a class="tocitem" href="../../ClimateGeneration/">Climate</a></li><li><input class="collapse-toggle" id="menuitem-11-2" type="checkbox"/><label class="tocitem" for="menuitem-11-2"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../UseofObservation/">Use of Observation</a></li><li><a class="tocitem" href="../../ObservationOperators/">Observation operators</a></li><li><a class="tocitem" href="../../ObservationHowto/GNSS/">GNSS ZTD observations</a></li><li><a class="tocitem" href="../../ObservationHowto/Amv/">Atmospheric Motion Vectors (AMV)</a></li><li><a class="tocitem" href="../../RadarData/">Assimilation of Radar Data</a></li><li><input class="collapse-toggle" id="menuitem-11-2-6" type="checkbox"/><label class="tocitem" for="menuitem-11-2-6"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../ObservationPreprocessing/ObservationData/">Observation data</a></li><li><a class="tocitem" href="../../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../../ObservationPreprocessing/Cope/">Cope</a></li></ul></li></ul></li><li><a class="tocitem" href="../../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../../BoundaryFilePreparation/">Boundaries</a></li><li><a class="tocitem" href="../../Screening/">Screening</a></li><li><a class="tocitem" href="../../Analysis/SurfaceAnalysis/">Surface Analysis</a></li><li><a class="tocitem" href="../../DigitialFilterInitialization/">DFI</a></li><li><a class="tocitem" href="../../Forecast/">Forecast</a></li><li><input class="collapse-toggle" id="menuitem-11-10" type="checkbox" checked/><label class="tocitem" for="menuitem-11-10"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Obsmon/">Obsmon</a></li><li><a class="tocitem" href="../Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../xtool/">xtool</a></li><li><a class="tocitem" href="../gl/Interpolation/">GL interpolation</a></li><li><input class="collapse-toggle" id="menuitem-11-10-5" type="checkbox" checked/><label class="tocitem" for="menuitem-11-10-5"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../Verification/">HARMONIE Verification</a></li><li class="is-active"><a class="tocitem" href>-</a><ul class="internal"><li><a class="tocitem" href="#Verification-preparation-1"><span>Verification preparation</span></a></li><li><a class="tocitem" href="#Introduction-1"><span>Introduction</span></a></li><li><a class="tocitem" href="#Station-lists-used-by-verification-1"><span>Station lists used by verification</span></a></li><li><a class="tocitem" href="#Field-extraction-1"><span>Field extraction</span></a></li><li><a class="tocitem" href="#Extract-observations-1"><span>Extract observations</span></a></li><li><a class="tocitem" href="#A-general-input-format-1"><span>A general input format</span></a></li><li><a class="tocitem" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../../HarmonieSystemDocumentation.md)-1"><span>Back to the main page of the HARMONIE System Documentation</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../Fullpos/">Fullpos</a></li><li><a class="tocitem" href="../FileConversions/">FileConversion</a></li><li><a class="tocitem" href="../gl_grib_api/">gl<em>grib</em>api</a></li></ul></li></ul></li><li><span class="tocitem">Other</span><ul><li><a class="tocitem" href="../../Scalability_and_Refactoring/">Scalability and refactoring</a></li><li><a class="tocitem" href="../../HarmonieBenchMark/">Harmonie RAPS benchmark</a></li><li><a class="tocitem" href="../../MFaccess/">Using Météo-France Servers</a></li><li><a class="tocitem" href="../../Phasing/">Phasing information</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">ECFlow tasks</a></li><li><a class="is-disabled">Post Processing</a></li><li><a class="is-disabled">Verification</a></li><li class="is-active"><a href>-</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>-</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://hirlam.org/trac//wiki//HarmonieSystemDocumentation/PostPP/Extract4verification?action=edit" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Verification-preparation-1"><a class="docs-heading-anchor" href="#Verification-preparation-1">Verification preparation</a><a class="docs-heading-anchor-permalink" href="#Verification-preparation-1" title="Permalink"></a></h2><h2 id="Introduction-1"><a class="docs-heading-anchor" href="#Introduction-1">Introduction</a><a class="docs-heading-anchor-permalink" href="#Introduction-1" title="Permalink"></a></h2><p>Before we can run the verification we need to extract data for each geographical point and produce files in a format that the verification program can use. In HARMONIE there are two programs, one fore extracting model data (fldextr<em>grib</em>api) and one for observations ( obsextr ). Both are part of the <a href="https://hirlam.org/trac/browser/Harmonie/util/gl_grib_api">gl<em>grib</em>api package</a>. </p><p>fldextr is capable of extracting data from several sources (HARMONIE/HIRLAM/IFS and produces so called vfld-files in ASCII format. The main tasks of the program is to:</p><ul><li>Recalculates rh,td to be over water</li><li>Interpolates to geographical points according to a synop.list and temp.list</li><li>Does MSLP,RH2M,TD2M calculations if the are not available in the input file</li><li>Optional fraction of land check.</li><li>Interpolates to pressure levels for TEMP data.</li></ul><p>obsextr extracts conventional observations from BUFR data and creates a vobs file similar to the vfld file. It:</p><ul><li>Reads SYNOP and TEMP</li><li>LUSE_LIST controls the usage of a station list</li></ul><h2 id="Station-lists-used-by-verification-1"><a class="docs-heading-anchor" href="#Station-lists-used-by-verification-1">Station lists used by verification</a><a class="docs-heading-anchor-permalink" href="#Station-lists-used-by-verification-1" title="Permalink"></a></h2><p><a href="https://hirlam.org/trac/browser/Harmonie/scr/Fldextr">Fldextr</a> links  synop.list to HM_LIB/util/gl<em>grib</em>api/scr/allsynop.list  and temp.list to HM_LIB/util/gl<em>grib</em>api/scr/alltemp.list. These station lists are based on information in WMO&#39;s &#39;&#39;Publication No. 9, Volume A, Observing Stations  and WMO Catalogue of Radiosondes<em>. This is regularly updated by the WMO. allsynop.list and alltemp.list are updated less frequently. There is also scope to include local stations in these lists that are not included in WMO&#39;s</em>Publication No. 9&#39;&#39;. The following 7-digit station identifiers are available to HIRLAM countries:</p><table><tr><th style="text-align: right">Norway</th><th style="text-align: right">!1000000 - !1099999</th></tr><tr><td style="text-align: right">Sweden</td><td style="text-align: right">!2000000 - !2099999</td></tr><tr><td style="text-align: right">Estonia</td><td style="text-align: right">!2600000 - !2649999</td></tr><tr><td style="text-align: right">Lithuania</td><td style="text-align: right">!2650000 - !2699999</td></tr><tr><td style="text-align: right">Finland</td><td style="text-align: right">!2700000 - !2799999</td></tr><tr><td style="text-align: right">Ireland</td><td style="text-align: right">!3900000 - !3900000</td></tr><tr><td style="text-align: right">Iceland</td><td style="text-align: right">!4000000 - !4099999</td></tr><tr><td style="text-align: right">Greenland</td><td style="text-align: right">!4200000 - !4299999</td></tr><tr><td style="text-align: right">Denmark</td><td style="text-align: right">!6000000 - !6999999</td></tr><tr><td style="text-align: right">Netherlands</td><td style="text-align: right">!6200000 - !6299999</td></tr><tr><td style="text-align: right">Spain</td><td style="text-align: right">!8000000 - !8099999</td></tr></table><h2 id="Field-extraction-1"><a class="docs-heading-anchor" href="#Field-extraction-1">Field extraction</a><a class="docs-heading-anchor-permalink" href="#Field-extraction-1" title="Permalink"></a></h2><p><a href="https://hirlam.org/trac/browser/Harmonie/scr/Fldextr">Fldextr</a>. This script goes through all forecast files and  collects all the variables (T2m, V10m, mean sea level pressure, RH2m, Q2m, total cloudiness, precipitation + profiles)  needed in basic verification.</p><ul><li>Input parameters: none.</li><li>Data: Forecast files.</li><li>Namelists: Station lists for surface data (ewglam.list) and radiosounding data (temp.list).</li><li>Executables: fldextr.</li><li>Output: Field extraction files (vfld<span>${EXP}$</span>{DTG}), which are placed in <em>EXTRARCH</em>.</li></ul><h2 id="Extract-observations-1"><a class="docs-heading-anchor" href="#Extract-observations-1">Extract observations</a><a class="docs-heading-anchor-permalink" href="#Extract-observations-1" title="Permalink"></a></h2><p><a href="https://hirlam.org/trac/browser/Harmonie/scr/FetchOBS">FetchOBS</a> scripts takes care of the observation  extraction for verification. First, the observation BUFR-file is fetched from the MARS (<strong>ExtractVEROBSfromMARS</strong>),  then all the needed data is extracted from the BUFR-files.</p><ul><li>Input parameters: none.  </li><li>Data:  Station lists for surface data (ewglam.list) and radiosounding data (temp.list). These shoud be found from <em>SCRDIR</em>  </li><li>Executables: mars, obsextr.  </li><li>Output: Field extraction files (vobs<em>), which are placed in *EXTRARCH</em>.</li></ul><p>For the continuous monitoring on hirlam.org the most recent data are kept online at ECMWF under <code>ecgb:/scratch/ms/dk/nhz/OBS</code>.</p><h2 id="A-general-input-format-1"><a class="docs-heading-anchor" href="#A-general-input-format-1">A general input format</a><a class="docs-heading-anchor-permalink" href="#A-general-input-format-1" title="Permalink"></a></h2><p>The file format for verification is a simple ascii file with a header that allows an arbitrary number of different types of point data to be included in the model vfld- or observation vobs- files.</p><p>The generalized input format is defined as </p><pre><code class="language-bash">nstation_synop nstation_temp version_flag  # written in fortran format &#39;(1x,3I6)&#39; )
# where version_flag == 4
# If ( nstation_synop &gt; 0 ) we read the variables in the file, their descriptors and
# their accumulation time
#
nvar_synop
DESC_1 ACC_TIME_1
...
DESC_nvar_synop ACC_TIME_nvar_synop
# Station information and data N=nstation_synop times
stid_1 lat lon hgt val(1:nvar_synop)
...
stid_N lat lon hgt val(1:nvar_synop)

# If ( nstation_temp &gt; 0 )
nlev_temp
nvar_temp
DESC_1 ACC_TIME_1
..
DESC_nvar_temp ACC_TIME_nvar_temp
# Station information and data nstation_temp times
# and station data nlev_temp times for each station
stid_1 lat lon hgt
pressure(1) val(1:nvar_temp)
...
pressure(nlev_temp) val(1:nvar_temp)
stid_2 lat lon hgt
...</code></pre><p>The accumulation time allows us to e.g. easily include different precipitation accumulation intervals.</p><h2 id="[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../../HarmonieSystemDocumentation.md)-1"><a class="docs-heading-anchor" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../../HarmonieSystemDocumentation.md)-1"><a href="../HarmonieSystemDocumentation.md">Back to the main page of the HARMONIE System Documentation</a></a><a class="docs-heading-anchor-permalink" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../../HarmonieSystemDocumentation.md)-1" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Verification/">« HARMONIE Verification</a><a class="docs-footer-nextpage" href="../Fullpos/">Fullpos »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 30 March 2021 17:28">Tuesday 30 March 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
