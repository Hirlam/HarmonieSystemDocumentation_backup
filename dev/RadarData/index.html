<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Assimilation of Radar Data · Harmonie wiki</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit">Harmonie wiki</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Running at ECMWF and local</span><ul><li><a class="tocitem" href="../Harmonie-mSMS/">Running at ECMWF</a></li><li><a class="tocitem" href="../Fast_start_on_cca/">Fast start on cca</a></li><li><a class="tocitem" href="../QuickStartLocal/">Quick start local</a></li></ul></li><li><span class="tocitem">Installation</span><ul><li><a class="tocitem" href="../Installation/">Installation</a></li><li><a class="tocitem" href="../General/">General Software Requirements</a></li><li><a class="tocitem" href="../Build_with_makeup/">Makeup</a></li><li><a class="tocitem" href="../StandaloneOdb/">Stand Alone ODB</a></li><li><a class="tocitem" href="../Redhat7Install/">Redhat7</a></li><li><a class="tocitem" href="../Centos6Install/">Centos6</a></li></ul></li><li><a class="tocitem" href="../TheHarmonieScript/">The Harmonie Script</a></li><li><a class="tocitem" href="../DrHook/">Profiling and Traceback</a></li><li><a class="tocitem" href="../FileFormats/">File Formats</a></li><li><span class="tocitem">Job Scheduling</span><ul><li><a class="tocitem" href="../ECFLOW/">ECFlow</a></li><li><a class="tocitem" href="../scripts/mXCdp/">mXCdp</a></li><li><a class="tocitem" href="../scripts/mSMS/">mSMS</a></li></ul></li><li><span class="tocitem">Testbed and Mitraillette</span><ul><li><a class="tocitem" href="../Evaluation/HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../Evaluation/Mitraillette/">Mitraillette</a></li></ul></li><li><span class="tocitem">Directories  and Binaries</span><ul><li><a class="tocitem" href="../Content/">Directories</a></li><li><a class="tocitem" href="../Binaries/">Binaries</a></li></ul></li><li><span class="tocitem">Configuration</span><ul><li><a class="tocitem" href="../ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../Namelists/">Namelist</a></li><li><a class="tocitem" href="../UpdateNamelists/">Update Namelist</a></li><li><a class="tocitem" href="../ModelDomain/">Model Domain</a></li><li><a class="tocitem" href="../VerticalGrid/">Vertical Grid</a></li><li><a class="tocitem" href="../ClimateSimulation/">Climate Simulation</a></li><li><a class="tocitem" href="../How_to_use_hires_topography/">Hires topography</a></li></ul></li><li><span class="tocitem">ECFlow tasks</span><ul><li><a class="tocitem" href="../ClimateGeneration/">Climate</a></li><li><input class="collapse-toggle" id="menuitem-11-2" type="checkbox" checked/><label class="tocitem" for="menuitem-11-2"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../UseofObservation/">Use of Observation</a></li><li><a class="tocitem" href="../ObservationOperators/">Observation operators</a></li><li><a class="tocitem" href="../ObservationHowto/GNSS/">GNSS ZTD observations</a></li><li><a class="tocitem" href="../ObservationHowto/Amv/">Atmospheric Motion Vectors (AMV)</a></li><li class="is-active"><a class="tocitem" href>Assimilation of Radar Data</a><ul class="internal"><li><a class="tocitem" href="#HARMONIE-compilation-1"><span>HARMONIE compilation</span></a></li><li><a class="tocitem" href="#Format-1"><span>Format</span></a></li><li><a class="tocitem" href="#Data-retreival-1"><span>Data retreival</span></a></li><li><a class="tocitem" href="#Data-processing-1"><span>Data processing</span></a></li><li><a class="tocitem" href="#Common-pitfalls-1"><span>Common pitfalls</span></a></li><li><a class="tocitem" href="#Further-reading-1"><span>Further reading</span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-11-2-6" type="checkbox"/><label class="tocitem" for="menuitem-11-2-6"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../ObservationPreprocessing/ObservationData/">Observation data</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Cope/">Cope</a></li></ul></li></ul></li><li><a class="tocitem" href="../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../BoundaryFilePreparation/">Boundaries</a></li><li><a class="tocitem" href="../Screening/">Screening</a></li><li><a class="tocitem" href="../Analysis/SurfaceAnalysis/">Surface Analysis</a></li><li><a class="tocitem" href="../DigitialFilterInitialization/">DFI</a></li><li><a class="tocitem" href="../Forecast/">Forecast</a></li><li><input class="collapse-toggle" id="menuitem-11-10" type="checkbox"/><label class="tocitem" for="menuitem-11-10"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PostPP/Obsmon/">Obsmon</a></li><li><a class="tocitem" href="../PostPP/Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../PostPP/xtool/">xtool</a></li><li><a class="tocitem" href="../PostPP/gl/Interpolation/">GL interpolation</a></li><li><input class="collapse-toggle" id="menuitem-11-10-5" type="checkbox"/><label class="tocitem" for="menuitem-11-10-5"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PostPP/Verification/">HARMONIE Verification</a></li><li><a class="tocitem" href="../PostPP/Extract4verification/">-</a></li></ul></li><li><a class="tocitem" href="../PostPP/Fullpos/">Fullpos</a></li><li><a class="tocitem" href="../PostPP/FileConversions/">FileConversion</a></li><li><a class="tocitem" href="../PostPP/gl_grib_api/">gl<em>grib</em>api</a></li></ul></li></ul></li><li><span class="tocitem">Other</span><ul><li><a class="tocitem" href="../Scalability_and_Refactoring/">Scalability and refactoring</a></li><li><a class="tocitem" href="../HarmonieBenchMark/">Harmonie RAPS benchmark</a></li><li><a class="tocitem" href="../MFaccess/">Using Météo-France Servers</a></li><li><a class="tocitem" href="../Phasing/">Phasing information</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">ECFlow tasks</a></li><li><a class="is-disabled">Observations</a></li><li class="is-active"><a href>Assimilation of Radar Data</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Assimilation of Radar Data</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://hirlam.org/trac//wiki//HarmonieSystemDocumentation/RadarData?action=edit" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Assimilation-of-Radar-Data-1"><a class="docs-heading-anchor" href="#Assimilation-of-Radar-Data-1">Assimilation of Radar Data</a><a class="docs-heading-anchor-permalink" href="#Assimilation-of-Radar-Data-1" title="Permalink"></a></h1><p>This documentation outlines how to retrieve, process and assimilate HDF5 radar data</p><h2 id="HARMONIE-compilation-1"><a class="docs-heading-anchor" href="#HARMONIE-compilation-1">HARMONIE compilation</a><a class="docs-heading-anchor-permalink" href="#HARMONIE-compilation-1" title="Permalink"></a></h2><p>HIRLAM have made code changes to BATOR to allow the direct reading of HDF5 radar data and conversion to ODB suitable for use in the HARMONIE data assimilation system. If you wish to use these changes you must compile HARMONIE with support for HDF5. This requires the addition of <em>-DUSE_HDF5</em> to the FDEFS in your makeup config file as well has adding hdf5 to EXTMODS. <a href="https://hirlam.org/trac/browser/tags/harmonie-38h1.2/util/makeup/config.cca.gnu">source:tags/harmonie-38h1.2/util/makeup/config.cca.gnu</a> is an example of a makeup config file </p><h2 id="Format-1"><a class="docs-heading-anchor" href="#Format-1">Format</a><a class="docs-heading-anchor-permalink" href="#Format-1" title="Permalink"></a></h2><p>The BATOR code assumes the HDF5 radar data being read uses the OPERA Data Information Model (ODIM). See <a href="http://www.eumetnet.eu/sites/default/files/OPERA2014_O4_ODIM_H5-v2.2.pdf">http://www.eumetnet.eu/sites/default/files/OPERA2014<em>O4</em>ODIM_H5-v2.2.pdf</a> for further information.</p><h2 id="Data-retreival-1"><a class="docs-heading-anchor" href="#Data-retreival-1">Data retreival</a><a class="docs-heading-anchor-permalink" href="#Data-retreival-1" title="Permalink"></a></h2><p>Local HDF5 ODIM radar data can be used or, alternatively, can be retrieved from a BALTRAD ftp site.</p><h2 id="Data-processing-1"><a class="docs-heading-anchor" href="#Data-processing-1">Data processing</a><a class="docs-heading-anchor-permalink" href="#Data-processing-1" title="Permalink"></a></h2><p>The HARMONIE script system requires that the OPERA HDF5 data files be stored in RADARDIR (defined in ecf/config<em>exp.h ) and have a file name using the format: {HDFID}</em>qcvol_<span>${DATE}T$</span>{HH}00.h5 where: </p><ul><li>HDFID is a 5 digit OPERA radar identifier</li><li>DATE is the date</li><li>HH is the hour</li></ul><h2 id="Common-pitfalls-1"><a class="docs-heading-anchor" href="#Common-pitfalls-1">Common pitfalls</a><a class="docs-heading-anchor-permalink" href="#Common-pitfalls-1" title="Permalink"></a></h2><ul><li>Forgetting to add -DUSE_HDF5 correctly to your config file</li><li>Incorrect RADARDIR</li><li>Incorrect file names</li><li>Incorrect format entered in refdata - BATOR is quite strict about how it reads the information in refdata:</li></ul><pre><code class="language-bash">02918zh  HDF5     radarv           20100808 03 </code></pre><h2 id="Further-reading-1"><a class="docs-heading-anchor" href="#Further-reading-1">Further reading</a><a class="docs-heading-anchor-permalink" href="#Further-reading-1" title="Permalink"></a></h2><p>Martin Ridal&#39;s radar data assimilation presentation: <a href="https://hirlam.org/trac/raw-attachment/wiki/HarmonieSystemTraining2014/Programme/MR_radarobservations.pdf">https://hirlam.org/trac/raw-attachment/wiki/HarmonieSystemTraining2014/Programme/MR_radarobservations.pdf</a></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../ObservationHowto/Amv/">« Atmospheric Motion Vectors (AMV)</a><a class="docs-footer-nextpage" href="../ObservationPreprocessing/ObservationData/">Observation data »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 6 September 2021 15:20">Monday 6 September 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
