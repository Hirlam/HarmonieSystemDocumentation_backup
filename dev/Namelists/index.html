<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Namelist · Harmonie wiki</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit">Harmonie wiki</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Running at ECMWF and local</span><ul><li><a class="tocitem" href="../Harmonie-mSMS/">Running at ECMWF</a></li><li><a class="tocitem" href="../Fast_start_on_cca/">Fast start on cca</a></li><li><a class="tocitem" href="../QuickStartLocal/">Quick start local</a></li></ul></li><li><span class="tocitem">Installation</span><ul><li><a class="tocitem" href="../Installation/">Installation</a></li><li><a class="tocitem" href="../General/">General Software Requirements</a></li><li><a class="tocitem" href="../Build_with_makeup/">Makeup</a></li><li><a class="tocitem" href="../StandaloneOdb/">Stand Alone ODB</a></li><li><a class="tocitem" href="../Redhat7Install/">Redhat7</a></li><li><a class="tocitem" href="../Centos6Install/">Centos6</a></li></ul></li><li><a class="tocitem" href="../TheHarmonieScript/">The Harmonie Script</a></li><li><a class="tocitem" href="../DrHook/">Profiling and Traceback</a></li><li><a class="tocitem" href="../FileFormats/">File Formats</a></li><li><span class="tocitem">Job Scheduling</span><ul><li><a class="tocitem" href="../ECFLOW/">ECFlow</a></li><li><a class="tocitem" href="../scripts/mXCdp/">mXCdp</a></li><li><a class="tocitem" href="../scripts/mSMS/">mSMS</a></li></ul></li><li><span class="tocitem">Testbed and Mitraillette</span><ul><li><a class="tocitem" href="../Evaluation/HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../Evaluation/Mitraillette/">Mitraillette</a></li></ul></li><li><span class="tocitem">Directories  and Binaries</span><ul><li><a class="tocitem" href="../Content/">Directories</a></li><li><a class="tocitem" href="../Binaries/">Binaries</a></li></ul></li><li><span class="tocitem">Configuration</span><ul><li><a class="tocitem" href="../ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../PlatformConfiguration/">Platform</a></li><li class="is-active"><a class="tocitem" href>Namelist</a><ul class="internal"><li><a class="tocitem" href="#Controlling-the-namelists-in-HARMONIE-1"><span>Controlling the namelists in HARMONIE</span></a></li><li><a class="tocitem" href="#Introduction-1"><span>Introduction</span></a></li><li><a class="tocitem" href="#harmone_namelists.pm-1"><span>harmone_namelists.pm</span></a></li><li><a class="tocitem" href="#surfex_namelists.pm-1"><span>surfex_namelists.pm</span></a></li><li><a class="tocitem" href="#surfex*selected*output.pm-1"><span>surfex<em>selected</em>output.pm</span></a></li><li><a class="tocitem" href="#Change-your-namelists-1"><span>Change your namelists</span></a></li><li><a class="tocitem" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><span>Back to the main page of the HARMONIE System Documentation</span></a></li></ul></li><li><a class="tocitem" href="../UpdateNamelists/">Update Namelist</a></li><li><a class="tocitem" href="../ModelDomain/">Model Domain</a></li><li><a class="tocitem" href="../VerticalGrid/">Vertical Grid</a></li><li><a class="tocitem" href="../ClimateSimulation/">Climate Simulation</a></li><li><a class="tocitem" href="../How_to_use_hires_topography/">Hires topography</a></li></ul></li><li><span class="tocitem">ECFlow tasks</span><ul><li><a class="tocitem" href="../ClimateGeneration/">Climate</a></li><li><input class="collapse-toggle" id="menuitem-11-2" type="checkbox"/><label class="tocitem" for="menuitem-11-2"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../UseofObservation/">Use of Observation</a></li><li><a class="tocitem" href="../ObservationOperators/">Observation operators</a></li><li><a class="tocitem" href="../ObservationHowto/GNSS/">GNSS ZTD observations</a></li><li><a class="tocitem" href="../ObservationHowto/Amv/">Atmospheric Motion Vectors (AMV)</a></li><li><a class="tocitem" href="../RadarData/">Assimilation of Radar Data</a></li><li><input class="collapse-toggle" id="menuitem-11-2-6" type="checkbox"/><label class="tocitem" for="menuitem-11-2-6"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../ObservationPreprocessing/ObservationData/">Observation data</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Cope/">Cope</a></li></ul></li></ul></li><li><a class="tocitem" href="../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../BoundaryFilePreparation/">Boundaries</a></li><li><a class="tocitem" href="../Screening/">Screening</a></li><li><a class="tocitem" href="../Analysis/SurfaceAnalysis/">Surface Analysis</a></li><li><a class="tocitem" href="../DigitialFilterInitialization/">DFI</a></li><li><a class="tocitem" href="../Forecast/">Forecast</a></li><li><input class="collapse-toggle" id="menuitem-11-10" type="checkbox"/><label class="tocitem" for="menuitem-11-10"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PostPP/Obsmon/">Obsmon</a></li><li><a class="tocitem" href="../PostPP/Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../PostPP/xtool/">xtool</a></li><li><a class="tocitem" href="../PostPP/gl/Interpolation/">GL interpolation</a></li><li><input class="collapse-toggle" id="menuitem-11-10-5" type="checkbox"/><label class="tocitem" for="menuitem-11-10-5"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PostPP/Verification/">HARMONIE Verification</a></li><li><a class="tocitem" href="../PostPP/Extract4verification/">-</a></li></ul></li><li><a class="tocitem" href="../PostPP/Fullpos/">Fullpos</a></li><li><a class="tocitem" href="../PostPP/FileConversions/">FileConversion</a></li><li><a class="tocitem" href="../PostPP/gl_grib_api/">gl<em>grib</em>api</a></li></ul></li></ul></li><li><span class="tocitem">Other</span><ul><li><a class="tocitem" href="../Scalability_and_Refactoring/">Scalability and refactoring</a></li><li><a class="tocitem" href="../HarmonieBenchMark/">Harmonie RAPS benchmark</a></li><li><a class="tocitem" href="../MFaccess/">Using Météo-France Servers</a></li><li><a class="tocitem" href="../Phasing/">Phasing information</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Configuration</a></li><li class="is-active"><a href>Namelist</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Namelist</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://hirlam.org/trac//wiki//HarmonieSystemDocumentation/Namelists?action=edit" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Controlling-the-namelists-in-HARMONIE-1"><a class="docs-heading-anchor" href="#Controlling-the-namelists-in-HARMONIE-1">Controlling the namelists in HARMONIE</a><a class="docs-heading-anchor-permalink" href="#Controlling-the-namelists-in-HARMONIE-1" title="Permalink"></a></h2><h2 id="Introduction-1"><a class="docs-heading-anchor" href="#Introduction-1">Introduction</a><a class="docs-heading-anchor-permalink" href="#Introduction-1" title="Permalink"></a></h2><p>IFS is largely driven by namelists and has thousands of options. For each configuration a number of namelists controlling different parts are read. To make the maintenance of the namelists manageable and to assure consistency in terms on e.g. name conventions for fields, packing accuracy, physics settings and parallel options all namelists are generated as they are needed during the run. All the basic settings are defined in a perl dictionary <a href="https://hirlam.org/trac/browser/Harmonie/nam/harmonie_namelists.pm?rev=harmonie-43h2.1">harmone_namelists.pm</a> for IFS and <a href="https://hirlam.org/trac/browser/Harmonie/nam/surfex_namelists.pm?rev=harmonie-43h2.1">surfex_namelists.pm</a> and <a href="https://hirlam.org/trac/browser/Harmonie/nam/surfex_selected_output.pm?rev=harmonie-43h2.1">surfex<em>selected</em>output.pm</a> for SURFEX. There is a preliminary work on commenting the <a href="https://hirlam.org/trac/attachment/wiki/HarmonieSystemDocumentation/Namelists/namelist_forecast_%20model_cy43_commented_PA1.pdf">reference namelist model forecast settings</a> and <a href="https://hirlam.org/trac/attachment/wiki/HarmonieSystemDocumentation/Namelists/namelist_sfx_forecast">surfex reference namelist settings</a>. In future versions the commented namelists will be included and maintained as part of the code.   The IFS dictionary is structured in several sections:</p><h2 id="harmone_namelists.pm-1"><a class="docs-heading-anchor" href="#harmone_namelists.pm-1">harmone_namelists.pm</a><a class="docs-heading-anchor-permalink" href="#harmone_namelists.pm-1" title="Permalink"></a></h2><ul><li>Global settings</li><li>Technical settings</li><li>Host specific settings</li><li>MPP options</li><li>File settings</li></ul><ul><li>DYNAMICS SETTINGS</li><li>Main dynamics switches</li><li>Non-hydrostatic settings</li><li>Vertical finite element</li><li>DFI</li></ul><ul><li>Main physics options. NB! These may contain switches for dynamics as well</li><li>ALADIN</li><li>AROME</li><li>EDMFM switches, to be applied after AROME</li><li>Alaro</li><li>Old surface</li><li>SURFEX</li><li>DDH</li></ul><ul><li>E927 Interpolation settings</li><li>Main fullpos settings</li><li>E927</li><li>E927 nh</li><li>SURFEX initial file generation</li><li>Aladin e927</li><li>ALARO e927</li><li>Arome e927</li></ul><ul><li>General postprocessing switches </li><li>Default fullpos settings</li><li>NH postprocessing</li><li>Switches for postprocessing with surfex</li><li>Special cases for arome</li></ul><ul><li>Assimilation</li><li>Canari<ul><li>Arome canari</li></ul></li><li>Varbc_rad</li><li>Varbc_coldstart</li><li>Screening<ul><li>Arome screening</li><li>Alaro screening</li></ul></li><li>Minimization  *Alaro minimization</li><li>4DVAR <ul><li>4DVAR minimization</li><li>4DVAR screening</li><li>4DVAR trajectory</li></ul></li></ul><ul><li>Climate generation</li><li>Climate generations (e923)</li></ul><ul><li>Misc</li><li>General namelist settings for Tangent-Linear and Adjoint tests </li><li>Extra Adjoint test options </li><li>Oulan</li><li>Bator</li></ul><p>The final namelists are build through the rules given in <a href="https://hirlam.org/trac/browser/Harmonie/scr/Get_namelist">Get_namelist</a> and are generated by <a href="https://hirlam.org/trac/browser/Harmonie/nam/gen_namelists.pl">gen_namelists.pl</a>. Note that in several cases environment variables are still parsed in the scripts.</p><h2 id="surfex_namelists.pm-1"><a class="docs-heading-anchor" href="#surfex_namelists.pm-1">surfex_namelists.pm</a><a class="docs-heading-anchor-permalink" href="#surfex_namelists.pm-1" title="Permalink"></a></h2><p>All possible SURFEX namelist setting are documented at the <a href="http://www.cnrm-game-meteo.fr/surfex">SURFEX web site</a>. Use the search text area in the upper right corner to search for a specific namelist or namelist option. Please, keep in mind that the SURFEX web site documents the latest SURFEX version, i.e. SURFEXv8, while in cy40h SURFEXv7.3 is used. Therefore, some of the settings may be different or not available.</p><hr/><h3 id="PGD-1"><a class="docs-heading-anchor" href="#PGD-1">PGD</a><a class="docs-heading-anchor-permalink" href="#PGD-1" title="Permalink"></a></h3><p>PGD represents in general the preparation of physiography data. The default PGD settings are listed here. Some modifications can be done for specific model configurations and will be specified as e.g. <code>alaro_pgd</code> or <code>arome_pgd</code>.</p><hr/><pre><code class="language-bash"># 2 layer ISBA scheme
%isba_2L=(
 NAM_ISBA=&gt;{
  CISBA          =&gt; &#39;&quot;2-L&quot;,&#39;,
  NGROUND_LAYER  =&gt; &#39;2,&#39;,
 },
);

# 3 layer ISBA scheme
%isba_3L=(
 NAM_ISBA=&gt;{
  CISBA          =&gt; &#39;&quot;3-L&quot;,&#39;,
  NGROUND_LAYER  =&gt; &#39;3,&#39;,
 },
);</code></pre><p>The section used here is decided by setting <code>CISBA=&quot;3-L&quot;</code> (default) in <a href="../HarmonieSystemDocumentation/ConfigureYourExperiment.md">config_exp.h</a>.</p><hr/><pre><code class="language-bash">%isba_pgd=(
 NAM_ISBA=&gt;{
   YCLAY         =&gt; &#39;YCLAY,&#39;,
   YCLAYFILETYPE =&gt; &#39;&quot;DIRECT&quot;,&#39; ,
   YSAND         =&gt; &#39;YSAND,&#39;,
   YSANDFILETYPE =&gt; &#39;&quot;DIRECT&quot;,&#39;
 },
);</code></pre><p>The clay/sand used is decided by setting <code>SOIL_TEXTURE_VERSION=FAO</code> (default) in <a href="../HarmonieSystemDocumentation/ConfigureYourExperiment.md">config_exp.h</a>. &quot;FAO&quot; corresponds to 10 km resolution clay/sand according to <a href="http://www.cnrm-game-meteo.fr/surfex//spip.php?article135">SURFEX Soil texture description</a>. The 1 km HWSD_v2 is not used by default since is shows strange vales over Scandinavia.</p><hr/><pre><code class="language-bash">%pgd=(
 NAM_IO_OFFLINE=&gt;{
  CSURF_FILETYPE =&gt; &#39;CSURF_FILETYPE,&#39;,
   CPGDFILE      =&gt; &#39;CPGDFILE,&#39;,
 },
 NAM_PGD_GRID=&gt;{
   CGRID         =&gt; &#39;&quot;CONF PROJ&quot;,&#39;,
 },
 NAM_CONF_PROJ=&gt;{
   XLAT0         =&gt; $ENV{LAT0},
   XLON0         =&gt; $ENV{LON0},
   XRPK          =&gt; $ENV{SINLAT0},
   XBETA         =&gt; 0.0,
 },
 NAM_CONF_PROJ_GRID=&gt;{
   XLATCEN       =&gt; $ENV{LATC},
   XLONCEN       =&gt; $ENV{LONC},
   NIMAX         =&gt; &#39;BNIMAX,&#39;,
   NJMAX         =&gt; &#39;BNJMAX,&#39;,
   XDX           =&gt; &#39;BXDX,&#39;, 
   XDY           =&gt; &#39;BXDY,&#39;,
 },
 NAM_COVER=&gt; {
   YCOVER        =&gt; &#39;YCOVER,&#39;,
   YCOVERFILETYPE=&gt; &#39;&quot;DIRECT&quot;,&#39;,
 },
 NAM_ZS=&gt;{
   YZS           =&gt; &#39;YTOPO,&#39;,
   YZSFILETYPE   =&gt; &#39;&quot;DIRECT&quot;,&#39;,
 },
 NAM_SEABATHY=&gt;{
   XUNIF_SEABATHY=&gt;&#39;0.,&#39;, 
 },
 NAM_PGD_SCHEMES=&gt;{
    CNATURE =&gt; &#39;&quot;ISBA &quot;,&#39;,
    CSEA    =&gt; &#39;&quot;SEAFLX&quot;,&#39;,
    CWATER  =&gt; &#39;&quot;WATFLX&quot;,&#39;,
    CTOWN   =&gt; &#39;&quot;TEB &quot;,&#39;,
 },
);</code></pre><p>Most options here are specified in different scripts and are normally not supposed to be modified. Exceptions are e.g.</p><ul><li>ECOCLIMAP version used (YCOVER) is decided by setting <code>ECOCLIMAP_VERSION=2.2</code> (default) in <a href="../HarmonieSystemDocumentation/ConfigureYourExperiment.md">config_exp.h</a>. Available ECOCLIMAP versions provided via the SURFEX team are documented in <a href="http://www.cnrm-game-meteo.fr/surfex//spip.php?article136">SURFEX Land use description</a>. Some of these can be available on your system, see your <code>$HM_CLDATA</code> setting.</li><li>Orography version used (YTOPO) is decided by setting <code>TOPO_SOURCE=gmted2010</code> (default) in <a href="../HarmonieSystemDocumentation/ConfigureYourExperiment.md">config_exp.h</a>.</li></ul><h3 id="PREP-1"><a class="docs-heading-anchor" href="#PREP-1">PREP</a><a class="docs-heading-anchor-permalink" href="#PREP-1" title="Permalink"></a></h3><p>PREP represents in general initialisation of prognostic variables. The default PREP settings are listed here. Some modifications can be done for specific model configurations and will be specified as e.g. <code>alaro_prep</code> or <code>arome_prep</code>.</p><hr/><pre><code class="language-bash">%sice_prep=(
 NAM_SEAFLUXn=&gt;{
    LHANDLE_SIC            =&gt;&#39;.TRUE.,&#39;,
    LSIC_FROM_FILE         =&gt;&#39;.TRUE.,&#39;,
    CSEA_ICE               =&gt;&#39;&quot;SICE&quot;,&#39;,
    NICE_LAYER             =&gt;&#39;4,&#39;,
 },
 NAM_PREP_SEAFLUX=&gt;{
    CFILE_SIC           =&gt;&#39;&quot;CFILE_SIC&quot;,&#39;,
    CTYPE_SIC           =&gt;&#39;&quot;GRIB  &quot;&#39;,
 },
 NAM_SIMPLE_ICE=&gt;{
    XICE_THICKNESS      =&gt;&#39;.75,&#39;,
    LICE_HAS_SNOW       =&gt;&#39;.FALSE.,&#39;,
    CICE_SNOW           =&gt;&#39;&quot;S-D&quot;,&#39;,
    NICE_SNOW_NLAYERS   =&gt;&#39;4,&#39;,
    XICE_SNOW_HEIGHT    =&gt;&#39;.3,&#39;,
    LSIC_DRIVEN_THICKNESS=&gt;&#39;.FALSE.&#39;,
    XSIC_DRIVEN_MAX_THICKNESS=&gt;&#39;1.&#39;,
 },
 NAM_PREP_SIMPLE_ICE=&gt;{
    LINIT_FROM_SST =&gt; &#39;.TRUE.,&#39;,
 },
);</code></pre><ul><li>CSEA_ICE : selects preferred sea ice scheme.</li></ul><blockquote><p>&#39;NONE&#39; – use default SURFEX ICEFLUX diagnostic scheme\  &#39;SICE&#39; – use SICE</p></blockquote><ul><li>LHANDLE_SIC : activates ice fraction handling</li><li>LSIC<em>FROM</em>FILE : ice fraction data from an external source</li></ul><blockquote><p>.TRUE. – use the externally provided ice fraction data\
.FALSE. – assume that ice fraction data is encoded within SST field</p></blockquote><ul><li>NICE<em>LAYER : number of ice layers (2 &lt; NICE</em>LAYER &lt; 100)</li></ul><ul><li>CFILE_SIC : external data file that stores ice fraction data</li><li>CTYPE_SIC : type of external data source</li></ul><ul><li>XICE_THICKNESS : uniform thickness of the ice field</li><li>LICE<em>HAS</em>SNOW : snow upon the ice</li></ul><blockquote><p>.TRUE. – preform snow-enabled run\
.FALSE. – use bare ice configuration</p></blockquote><ul><li>CICE_SNOW : snow scheme that used to parametrize snow upon the ice</li></ul><blockquote><p>&#39;S-D&#39; – test heat diffusion scheme\
&gt; NICE<em>SNOW</em>NLAYERS : number of snow layers for S-D snow scheme\
&gt; XICE<em>SNOW</em>HEIGHT : thickness of snow pack for S-D snow scheme\
&#39;3-L&#39; – use 3-L explicit snow scheme </p></blockquote><ul><li>LSIC<em>DRIVEN</em>THICKNESS : use ice fraction to estimate ice thickness. <strong>Untested, should be set to .FALSE.</strong></li><li>XSIC<em>DRIVEN</em>MAX<em>THICKNESS : unused if `LSIC</em>DRIVEN_THICKNESS == .FALSE.`</li></ul><ul><li>LINIT<em>FROM</em>SST : use composite SST/SIST field to initialize sea ice temperatures</li></ul><p>This part represents settings connected to the Simple Sea-ice Scheme (SICE) by Yurii Batrak. Please note that SICE is not yet an official contribution to SURFEX and therefore you will not find any documentation of SICE via the SURFEX web site. </p><hr/><pre><code class="language-bash">%isba_prep=(
 NAM_PREP_ISBA=&gt;{
   LISBA_CANOPY  =&gt; &#39;.TRUE.,&#39;,
   LEXTRAP_TG    =&gt; &#39;.TRUE.,&#39;,
   LEXTRAP_WG    =&gt; &#39;.TRUE.,&#39;,
   LEXTRAP_WGI   =&gt; &#39;.TRUE.,&#39;,
   LEXTRAP_SN    =&gt; &#39;.TRUE.,&#39;,
   NDIM_EXTRAP   =&gt; &#39;20,&#39;,
 },
 NAM_PREP_ISBA_SNOW=&gt;{
   LSWEMAX       =&gt; &#39;.TRUE.,&#39;,
 },
 NAM_DIAG_ISBAn=&gt;{
   LPATCH_BUDGET=&gt;&#39;.TRUE.,&#39;,
 },
);</code></pre><ul><li>LISBA_CANOPY : activates surface boundary multi layer scheme over vegetation</li><li>LEXTRAP_XX : extrapolate XX points where LSM &lt; 0.5 (buffer only)</li><li>NDIM_EXTRAP : Size of search domain for extrapolation (not in official SURFEX)</li><li>LSWEMAX : logical switch to set an upper limit on initial snow water equivalent (set by XSWEMAX (=500 kg/m2 default) ).</li></ul><hr/><pre><code class="language-bash">%fullpos_prep=(
 NAM_FILE_NAMES=&gt;{
   HPGDFILE      =&gt;&#39;&quot;PGDFILE&quot;,&#39;,
   CINIFILE      =&gt;&#39;&quot;SURFXINI&quot;,&#39;,
 },
);

%offline_prep=(
 NAM_IO_OFFLINE=&gt;{
   CSURF_FILETYPE       =&gt; &#39;&quot;LFI   &quot;,&#39;,
   CPREPFILE            =&gt; &#39;&quot;SURFXINI&quot;,&#39;,
   CPGDFILE             =&gt; &#39;&quot;PGD&quot;,&#39;,
 },
 NAM_PREP_SURF_ATM=&gt;{
   CFILEPGD      =&gt;&#39;&quot;PGD_host&quot;,&#39;,
   CFILEPGDTYPE  =&gt;&#39;&quot;LFI&quot;,&#39;,
   CFILE      =&gt;&#39;&quot;INFILE&quot;,&#39;,
   CFILETYPE  =&gt;&#39;CFILETYPE,&#39;,
   NYEAR      =&gt;&#39;NYEAR,&#39;,
   NMONTH     =&gt;&#39;NMONTH,&#39;,
   NDAY       =&gt;&#39;NDAY,&#39;,
   XTIME      =&gt;&#39;XTIME,&#39;,
 },
);</code></pre><p>Most options here are specified in different scripts and are normally not supposed to be modified.</p><hr/><pre><code class="language-bash">%arome_prep=(
 NAM_PREP_SEAFLUX=&gt;{
   LSEA_SBL     =&gt; &#39;.FALSE.,&#39;,
 },
 NAM_SEAFLUXn=&gt;{
    CSEA_ICE               =&gt;&#39;&quot;NONE&quot;,&#39;,
    LHANDLE_SIC            =&gt;&#39;.FALSE.,&#39;,
 },
);</code></pre><p>Please note these special settings for the AROME model configuration.</p><h3 id="FORECAST-1"><a class="docs-heading-anchor" href="#FORECAST-1">FORECAST</a><a class="docs-heading-anchor-permalink" href="#FORECAST-1" title="Permalink"></a></h3><p>FORECAST represents in general the namelist settings used during Forecast. The default FORECAST settings are listed here. Some modifications can be done for specific model configurations and will be specified as e.g. <code>alaro_forecast</code> or <code>arome_forecast</code>.</p><pre><code class="language-bash">%sice_forecast=(
 NAM_SEAFLUXn=&gt;{
    LHANDLE_SIC            =&gt;&#39;.TRUE.,&#39;,
    LSIC_FROM_FILE         =&gt;&#39;.TRUE.,&#39;,
    CSEA_ICE               =&gt;&#39;&quot;SICE&quot;,&#39;,
    NICE_LAYER             =&gt;&#39;4,&#39;,
 },
 NAM_SIMPLE_ICE=&gt;{
    XICE_THICKNESS            =&gt; &#39;.75,&#39;,
    LICE_HAS_SNOW             =&gt; &#39;.FALSE.,&#39;,
    CICE_SNOW                 =&gt; &#39;&quot;S-D&quot;,&#39;,
    NICE_SNOW_NLAYERS         =&gt; &#39;4,&#39;,
    XICE_SNOW_HEIGHT          =&gt; &#39;.3,&#39;,
    LSIC_DRIVEN_THICKNESS     =&gt; &#39;.FALSE.&#39;,
    XSIC_DRIVEN_MAX_THICKNESS =&gt; &#39;1.&#39;,
 },
 NAM_DIAG_SURFn=&gt;{
   LCOEF             =&gt; &#39;.TRUE.,&#39;,
   LSURF_VARS        =&gt; &#39;.TRUE.,&#39;,
 },
);</code></pre><p>This part represents settings connected to the Simple Sea-ice Scheme (SICE) by Yurii Batrak. Please note that SICE is not yet an official contribution to SURFEX and therefore you will not find any documentation of SICE via the SURFEX web site.</p><hr/><pre><code class="language-bash">%isba_forecast=(
 NAM_ISBAn=&gt;{
   CROUGH        =&gt; &#39;&quot;NONE&quot;,&#39;,
 },
 NAM_DIAG_ISBAn=&gt;{
   LPGD     =&gt; &#39;.TRUE.,&#39;,
   LSURF_MISC_BUDGET=&gt; &#39;.TRUE.,&#39;,
 },
);

%forecast=(
 NAM_IO_OFFLINE=&gt;{
  &#39;CSURF_FILETYPE&#39;      =&gt; &#39;&quot;LFI    &quot;,&#39;,
  &#39;CFORCING_FILETYPE&#39;   =&gt; &#39;&quot;ASCII&quot;,&#39;,
  &#39;CTIMESERIES_FILETYPE&#39;=&gt; &#39;&quot;LFI&quot;,&#39;,
  &#39;XTSTEP_SURF&#39;         =&gt; $ENV{TSTEP}.&quot;,&quot;,
  &#39;XTSTEP_OUTPUT&#39;       =&gt; &#39;3600.,&#39;,
  &#39;LRESTART&#39;            =&gt; &#39;.TRUE.,&#39;,
  &#39;CPREPFILE&#39;           =&gt; &#39;&quot;PREP&quot;,&#39;,
  &#39;CPGDFILE&#39;            =&gt; &#39;&quot;PGD&quot;,&#39;,
 },
 NAM_SURF_ATM=&gt;{
   XRIMAX=&gt;&#39;0.0,&#39;,
 },
 NAM_DIAG_SURFn=&gt;{
   LSURF_BUDGET      =&gt; &#39;.TRUE.,&#39;,
   N2M      =&gt;&#39;2,&#39;,
 },
 NAM_DIAG_SURF_ATMn=&gt;{
   LT2MMW            =&gt; &#39;.TRUE.,&#39;,
 },
 NAM_DIAG_ISBAn=&gt;{
   LPATCH_BUDGET  =&gt; &#39;.TRUE.,&#39;,
 },
 NAM_SSOn=&gt;{
   CROUGH   =&gt; &quot;&#39;&quot;.$ENV{CROUGH}.&quot;&#39;&quot;,
   XFRACZ0  =&gt; &#39;15.,&#39;,
 },
 NAM_SEAFLUXn=&gt;{
  CSEA_FLUX =&gt; &#39;&quot;ECUME&quot;,&#39;,
  LPWG      =&gt; &#39;.FALSE.,&#39;,
  LPRECIP   =&gt; &#39;.FALSE.,&#39;,
  LPWEBB    =&gt; &#39;.FALSE.,&#39;,
  CSEA_ICE    =&gt;&#39;&quot;NONE&quot;,&#39;,
  LHANDLE_SIC =&gt;&#39;.FALSE.,&#39;,
  LPERTFLUX   =&gt; &#39;LPERTSURF,&#39;,
 },
 NAM_ISBAn=&gt;{
  LCANOPY_DRAG =&gt; &#39;.TRUE.,&#39;,
  XCDRAG       =&gt; &#39;0.01,&#39;,
  LPERTSURF    =&gt; &#39;LPERTSURF,&#39;,
 },
);</code></pre><ul><li>XRIMAX: limitation of Richardson number in drag computation (=0 default).</li><li>N2M : flag to compute surface boundary layer characteristics (=0 default). N2M=2 computes temperature at 2 m, specific humidity at 2 m, relative humidity, zonal and meridian wind at 10 m, and Richardson number. 2m and 10m quantities are calculated interpolating between atmospheric forcing variables and surface temperature and humidity. Please note that if the surface boundary multi layer scheme is activated over any tile (as with LISBA_CANOPY=T over land) it overrides the diagnostic N2M method. </li><li>LT2MMW : Alternative weighting of grid average T2M giving more weight to the land tile (=FALSE default).</li><li>CROUGH: type of orographic roughness length. CROUGH is decided by setting <code>CROUGH=&quot;NONE&quot;</code> in <a href="../HarmonieSystemDocumentation/ConfigureYourExperiment.md">config_exp.h</a> which means that no orographic treatment is applied.</li><li>XFRACZ0 : Z0=Min(Z0, Href/XFRACZ0). Not applied here since CROUGH=&quot;NONE&quot;.</li><li>LPERTFLUX: multiplicative perturbation of Ecume fluxes for ensemble forecasting. In HARMONIE this is set in a number of scripts under scr.</li><li>LPERTSURF: if .True. modification of surface fluxes for ensemble forecasting. In HARMONIE this is set in a number of scripts under scr.</li><li>LCANOPY_DRAG: drag activated in SBL scheme within the canopy.</li><li>XCDRAG: drag coefficient in canopy (=0.15 default in SURFEX).</li></ul><h3 id="ASSIMILATION-1"><a class="docs-heading-anchor" href="#ASSIMILATION-1">ASSIMILATION</a><a class="docs-heading-anchor-permalink" href="#ASSIMILATION-1" title="Permalink"></a></h3><p>ASSIMILATION represents in general the surface assimilation namelist settings used for CANARI and SURFEX. The default ASSIMILATION settings are listed here. The SURFEX assimilation method used (OI or EKF) is decided by setting <code>ANASURF=CANARI_OI_MAIN</code> in <a href="../HarmonieSystemDocumentation/ConfigureYourExperiment.md">config_exp.h</a>. OI is default and EKF is still experimental.</p><pre><code class="language-bash">%sice_assim=(
 NAM_SEAFLUXn=&gt;{
    LHANDLE_SIC            =&gt;&#39;.TRUE.,&#39;,
    LSIC_FROM_FILE         =&gt;&#39;.TRUE.,&#39;,
    CSEA_ICE               =&gt;&#39;&quot;SICE&quot;,&#39;,
    NICE_LAYER             =&gt;&#39;4,&#39;,
 },
 NAM_SIMPLE_ICE=&gt;{
   LICE_HAS_SNOW       =&gt;&#39;.FALSE.,&#39;,
   XICE_THICKNESS      =&gt;&#39;.75,&#39;,
   CICE_SNOW           =&gt;&#39;&quot;S-D&quot;,&#39;,
   NICE_SNOW_NLAYERS   =&gt;&#39;4,&#39;,
   XICE_SNOW_HEIGHT    =&gt;&#39;.3,&#39;,
   LSIC_DRIVEN_THICKNESS      =&gt;&#39;.FALSE.&#39;,
   XSIC_DRIVEN_MAX_THICKNESS  =&gt;&#39;1.&#39;,
 
},
 NAM_PREP_SEAFLUX=&gt;{
    CFILE_SIC          =&gt; &#39;CFILE_SIC,&#39;,
    CTYPE_SIC          =&gt; &#39;&quot;GRIB  &quot;&#39;,
    LSEA_SBL           =&gt; &#39;.FALSE.&#39;,
 },
 NAM_PREP_SIMPLE_ICE=&gt;{
    LINIT_FROM_SST             =&gt;&#39;.TRUE.,&#39;,
    LPREP_ONLY_NEW_ICE         =&gt;&#39;.TRUE.,&#39;,
    LEXTRAPOLATE_FROM_FORECAST =&gt;&#39;.TRUE.,&#39;,
    CFORECAST_GRIB             =&gt;&#39;CFORECAST_GRIB&#39;,
 },
);</code></pre><ul><li>LPREP<em>ONLY</em>NEW_ICE : perform prep in current grid cell only if ice state is undefined</li><li>LEXTRAPOLATE<em>FROM</em>FORECAST : use previous forecast to fill areas with new ice. If <code>LINIT_FROM_SST == .TRUE. .AND. LEXTRAPOLATE_FROM_FORECAST == .TRUE.</code> option LINIT<em>FROM</em>SST is forced to .FALSE.</li><li>CFORECAST_GRIB : previous forecast in GRIB format</li></ul><p>This part represents settings connected to the Simple Sea-ice Scheme (SICE) by Yurii Batrak. Please note that SICE is not yet an official contribution to SURFEX and therefore you will not find any documentation of SICE via the SURFEX web site. </p><hr/><pre><code class="language-bash">%assim_surfex=(
 NAM_NACVEG=&gt;{
   NECHGU      =&gt; &#39;&#39;.$ENV{FCINT}.&#39;,&#39;,
   RCLIMCA     =&gt; &#39;0.,&#39;,
   RCLISST     =&gt; &#39;0.05,&#39;,
   SIGH2MO     =&gt; &#39;0.10,&#39;,
   SIGT2MO     =&gt; &#39;1.0,&#39;,
   LOBS2M      =&gt; &#39;.TRUE.,&#39;,
   LOBSWG      =&gt; &#39;.FALSE.,&#39;,
 },
 NAM_IO_OFFLINE=&gt;{
   CSURF_FILETYPE       =&gt; &#39;CSURF_FILETYPE,&#39;,
   CTIMESERIES_FILETYPE =&gt; &#39;&quot;LFI &quot;,&#39;,
   CFORCING_FILETYPE    =&gt; &#39;&quot;ASCII&quot;,&#39;,
   LRESTART             =&gt; &#39;.TRUE.,&#39;,
   XTSTEP_SURF          =&gt; &#39;3600.,&#39;,
   XTSTEP_OUTPUT        =&gt; &#39;3600.,&#39;,
 },
 NAM_ASSIM=&gt;{
   LASSIM              =&gt; &#39;.TRUE.,&#39;,
   LEXTRAP_WATER       =&gt; &#39;.TRUE.,&#39;,
   LEXTRAP_SEA         =&gt; &#39;.FALSE.,&#39;,
   LEXTRAP_NATURE      =&gt; &#39;.FALSE.&#39;,
   LREAD_SST_FROM_FILE =&gt; &#39;.TRUE.,&#39;,
   LWATERTG2           =&gt; &#39;.TRUE.,&#39;,
   LAESNM              =&gt; &#39;LAESNM,&#39;,
   LECSST              =&gt; &#39;LECSST,&#39;,
   LAROME              =&gt; &#39;LAROME,&#39;,
   NPRINTLEV           =&gt; &#39;1,&#39;,
 },
);

%oi_main=(
 NAM_ASSIM=&gt;{
   CASSIM_ISBA         =&gt; &#39;&quot;OI&quot;,&#39;,
 },
);</code></pre><h2 id="surfex*selected*output.pm-1"><a class="docs-heading-anchor" href="#surfex*selected*output.pm-1">surfex<em>selected</em>output.pm</a><a class="docs-heading-anchor-permalink" href="#surfex*selected*output.pm-1" title="Permalink"></a></h2><p>The output from SURFEX to the .sfx fa-files (e.g. <code>ICMSHHARM+0002.sfx</code>) is in general decided by SURFEX NAM<em>DIAG namelist settings. These settings activate or deactivate groups of variables in output files. When one or more such groups are activated it is possible to limit the output to a specific list of variables by the use of the LSELECT/CSELECT options in SURFEX. This way of specifying output from SURFEX is the default way in cy40h. The setting is `SURFEX</em>LSELECT=&quot;yes&quot;` in <a href="../HarmonieSystemDocumentation/ConfigureYourExperiment.md">config_exp.h</a>. When SURFEX<em>LSELECT=&quot;yes&quot; the namelist [surfex</em>selected<em>output.pm](https://hirlam.org/trac/browser/Harmonie/nam/surfex</em>selected<em>output.pm) is used to specify the output variables. The style of surfex</em>selected_output.pm is</p><pre><code class="language-bash">%surfex_output=(
 NAM_WRITE_DIAG_SURFn=&gt;{
   NSTEP_DUMP_STATE =&gt; &#39;NSTEP_DUMP_STATE,&#39;,
   LSELECT     =&gt; &#39;.TRUE.,&#39;,
   CSELECT     =&gt; &#39;
&quot;Z0&quot;,
&quot;RNC&quot;,
&quot;HC&quot;,


&quot;T2M_P&quot;,
&quot;T2MMIN_P&quot;,
&quot;T2MMAX_P&quot;,&#39;
 },);</code></pre><p>Please note the &quot; &#39; &quot; character at the end of the last variable line <code>&quot;T2MMAX_P&quot;,&#39;</code>. Don&#39;t miss it, it is very important! The naming convention for variables in this file follows the SURFEX naming convention which is not exactly how they appear in fa-files. A fa-file output example from a .sfx file may look:</p><pre><code class="language-bash">SFX.SST         &gt; 001:011-  000-102@20160301_15:00+002h00m tri:000 000 SST
SFX.TS_WATER    &gt; 001:011-  770-105@20160301_15:00+002h00m tri:000 000 TS_WATER
X001TG1         &gt;                   20160301_15:00+002h00m         000
X001TG2         &gt;                   20160301_15:00+002h00m         000
X001WG1         &gt;                   20160301_15:00+002h00m         000
X001WG2         &gt;                   20160301_15:00+002h00m         000
SFX.TROAD1      &gt;                   20160301_15:00+002h00m         000
SFX.WS_ROAD     &gt; 001:024-  950-105@20160301_15:00+002h00m tri:000 000 WS_ROAD</code></pre><p>You get the corresponding SURFEX names by removing &quot;SFX.&quot; or &quot;X001&quot; at the beginning of these fa-names.</p><p>The .sfx files are used as first guess for next forecast. However, the first guess needs ALL SURFEX variables and not only a subset as defined by LSELECT/CSELECT. Therefore, a full .sfx file (e.g. <code>ICMSHFULL+0003.sfx</code>) is created for each assimilation cycle hour in addition to the corresponding limited file <code>ICMSHHARM+0003.sfx</code>. The output frequency of full files is defined by <code>SURFEX_DUMP_STATE_STEPS=&quot;&quot;</code> in <a href="../HarmonieSystemDocumentation/ConfigureYourExperiment.md">config_exp.h</a>.</p><p>The content of the FULL-files can be used to identify additional variables to add to surfex<em>selected</em>output.pm.</p><h2 id="Change-your-namelists-1"><a class="docs-heading-anchor" href="#Change-your-namelists-1">Change your namelists</a><a class="docs-heading-anchor-permalink" href="#Change-your-namelists-1" title="Permalink"></a></h2><p>There are several ways of changing namelists generated from the dictionary.</p><ul><li>Copy the harmonie_namelist.pm file to your local experiment directory and change the right section like for any source or script modification.</li></ul><ul><li>If you feel uncertain where to change in the dictionary you can copy the actual namelist used in your run. Every namelist used is listed in the logfile so copy it from there and put it under the <code>nam</code> directory in your local experiment. Make sure you give it a unique name. You must then also change the script(s) using this namelist like in the <a href="https://hirlam.org/trac/browser/Harmonie/scr/Forecast">Forecast</a> script.</li></ul><pre><code class="language-bash">#  Get namelist name
#NAMELIST=$WRK/$WDIR/namelist_forecast
#Get_namelist forecast $NAMELIST
NAMELIST=$HM_LIB/nam/namelist_forecast_with_a_unique_name
</code></pre><p>For namelists not present in the dictionary you just copy them to you local <code>nam</code> directory.</p><p>There is also a description on how to generate new namelist dictionaries in  [HarmonieSystemDocumentation/UpdateNamelists here].</p><h2 id="[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><a class="docs-heading-anchor" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><a href="../HarmonieSystemDocumentation.md">Back to the main page of the HARMONIE System Documentation</a></a><a class="docs-heading-anchor-permalink" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../PlatformConfiguration/">« Platform</a><a class="docs-footer-nextpage" href="../UpdateNamelists/">Update Namelist »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 30 March 2021 17:19">Tuesday 30 March 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
