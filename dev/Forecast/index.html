<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Forecast · Harmonie wiki</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit">Harmonie wiki</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Running at ECMWF and local</span><ul><li><a class="tocitem" href="../Harmonie-mSMS/">Running at ECMWF</a></li><li><a class="tocitem" href="../Fast_start_on_cca/">Fast start on cca</a></li><li><a class="tocitem" href="../QuickStartLocal/">Quick start local</a></li></ul></li><li><span class="tocitem">Installation</span><ul><li><a class="tocitem" href="../Installation/">Installation</a></li><li><a class="tocitem" href="../General/">General Software Requirements</a></li><li><a class="tocitem" href="../Build_with_makeup/">Makeup</a></li><li><a class="tocitem" href="../StandaloneOdb/">Stand Alone ODB</a></li><li><a class="tocitem" href="../Redhat7Install/">Redhat7</a></li><li><a class="tocitem" href="../Centos6Install/">Centos6</a></li></ul></li><li><a class="tocitem" href="../TheHarmonieScript/">The Harmonie Script</a></li><li><a class="tocitem" href="../DrHook/">Profiling and Traceback</a></li><li><a class="tocitem" href="../FileFormats/">File Formats</a></li><li><span class="tocitem">Job Scheduling</span><ul><li><a class="tocitem" href="../ECFLOW/">ECFlow</a></li><li><a class="tocitem" href="../scripts/mXCdp/">mXCdp</a></li><li><a class="tocitem" href="../scripts/mSMS/">mSMS</a></li></ul></li><li><span class="tocitem">Testbed and Mitraillette</span><ul><li><a class="tocitem" href="../Evaluation/HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../Evaluation/Mitraillette/">Mitraillette</a></li></ul></li><li><span class="tocitem">Directories  and Binaries</span><ul><li><a class="tocitem" href="../Content/">Directories</a></li><li><a class="tocitem" href="../Binaries/">Binaries</a></li></ul></li><li><span class="tocitem">Configuration</span><ul><li><a class="tocitem" href="../ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../Namelists/">Namelist</a></li><li><a class="tocitem" href="../UpdateNamelists/">Update Namelist</a></li><li><a class="tocitem" href="../ModelDomain/">Model Domain</a></li><li><a class="tocitem" href="../VerticalGrid/">Vertical Grid</a></li><li><a class="tocitem" href="../ClimateSimulation/">Climate Simulation</a></li><li><a class="tocitem" href="../How_to_use_hires_topography/">Hires topography</a></li></ul></li><li><span class="tocitem">ECFlow tasks</span><ul><li><a class="tocitem" href="../ClimateGeneration/">Climate</a></li><li><input class="collapse-toggle" id="menuitem-11-2" type="checkbox"/><label class="tocitem" for="menuitem-11-2"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../UseofObservation/">Use of Observation</a></li><li><a class="tocitem" href="../ObservationOperators/">Observation operators</a></li><li><a class="tocitem" href="../ObservationHowto/GNSS/">GNSS ZTD observations</a></li><li><a class="tocitem" href="../ObservationHowto/Amv/">Atmospheric Motion Vectors (AMV)</a></li><li><a class="tocitem" href="../RadarData/">Assimilation of Radar Data</a></li><li><input class="collapse-toggle" id="menuitem-11-2-6" type="checkbox"/><label class="tocitem" for="menuitem-11-2-6"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../ObservationPreprocessing/ObservationData/">Observation data</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Cope/">Cope</a></li></ul></li></ul></li><li><a class="tocitem" href="../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../BoundaryFilePreparation/">Boundaries</a></li><li><a class="tocitem" href="../Screening/">Screening</a></li><li><a class="tocitem" href="../Analysis/SurfaceAnalysis/">Surface Analysis</a></li><li><a class="tocitem" href="../DigitialFilterInitialization/">DFI</a></li><li class="is-active"><a class="tocitem" href>Forecast</a><ul class="internal"><li><a class="tocitem" href="#Forecast-1"><span>Forecast</span></a></li><li><a class="tocitem" href="#Forecast-2"><span>Forecast</span></a></li><li><a class="tocitem" href="#Archiving-1"><span>Archiving</span></a></li><li><a class="tocitem" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><span>Back to the main page of the HARMONIE System Documentation</span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-11-10" type="checkbox"/><label class="tocitem" for="menuitem-11-10"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PostPP/Obsmon/">Obsmon</a></li><li><a class="tocitem" href="../PostPP/Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../PostPP/xtool/">xtool</a></li><li><a class="tocitem" href="../PostPP/gl/Interpolation/">GL interpolation</a></li><li><input class="collapse-toggle" id="menuitem-11-10-5" type="checkbox"/><label class="tocitem" for="menuitem-11-10-5"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PostPP/Verification/">HARMONIE Verification</a></li><li><a class="tocitem" href="../PostPP/Extract4verification/">-</a></li></ul></li><li><a class="tocitem" href="../PostPP/Fullpos/">Fullpos</a></li><li><a class="tocitem" href="../PostPP/FileConversions/">FileConversion</a></li><li><a class="tocitem" href="../PostPP/gl_grib_api/">gl<em>grib</em>api</a></li></ul></li></ul></li><li><span class="tocitem">Other</span><ul><li><a class="tocitem" href="../Scalability_and_Refactoring/">Scalability and refactoring</a></li><li><a class="tocitem" href="../HarmonieBenchMark/">Harmonie RAPS benchmark</a></li><li><a class="tocitem" href="../MFaccess/">Using Météo-France Servers</a></li><li><a class="tocitem" href="../Phasing/">Phasing information</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">ECFlow tasks</a></li><li class="is-active"><a href>Forecast</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Forecast</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://hirlam.org/trac//wiki//HarmonieSystemDocumentation/Forecast?action=edit" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Harmonie-system-Documentation-1"><a class="docs-heading-anchor" href="#Harmonie-system-Documentation-1">Harmonie system Documentation</a><a class="docs-heading-anchor-permalink" href="#Harmonie-system-Documentation-1" title="Permalink"></a></h1><h2 id="Forecast-1"><a class="docs-heading-anchor" href="#Forecast-1">Forecast</a><a class="docs-heading-anchor-permalink" href="#Forecast-1" title="Permalink"></a></h2><p>== Introduction</p><h2 id="Forecast-2"><a class="docs-heading-anchor" href="#Forecast-2">Forecast</a><a class="docs-heading-anchor-permalink" href="#Forecast-2" title="Permalink"></a></h2><p><a href="https://hirlam.org/trac/browser/Harmonie/scr/Forecast">Forecast</a> is the script, which initiates actual  forecast run (ALADIN/AROME/ALARO depending on <em>FLAG</em> and <em>PHFLAG</em>).</p><ul><li>Input parameters: none.</li><li>Data: Boundary files (<strong>ELSCF***-files). Initial file (</strong>fc<em>start**). If data assimilation is used, **fc</em>start** is the analysis file. In case of dynamical adaptation, <strong>fc_start</strong> is the first boundary file. In case of AROME, Surfex initial file (<strong>SURFXINI.lfi</strong>) is also needed (<a href="https://hirlam.org/trac/browser/Harmonie/scr/Prep_ini_surfex">Prep<em>ini</em>surfex</a>). </li><li>Namelists: namelist templates nam/namelist<em>fcst{FLAG}</em>default are fetched based on <em>FLAG</em> and <em>PHFLAG</em>. The templates are completed in <a href="https://hirlam.org/trac/browser/Harmonie/scr/Forecast">Forecast</a> based on the choices of <em>NPROCX</em>, <em>NPROCY</em> (see <a href="https://hirlam.org/trac/browser/Harmonie/config-sh/submit.ecgb">submit.ecgb</a>), <em>TFLAG</em>, <em>OUTINT</em>, <em>BDINT</em> and <em>REDUCELFI</em>. In case of AROME also the namelists to control SURFEX-scheme  (<a href="https://hirlam.org/trac/browser/Harmonie/nam/TEST.des">TEST.des</a> and <a href="https://hirlam.org/trac/browser/Harmonie/nam/EXSEG1.nam">EXSEG1.nam</a>) are needed.</li><li>Executables: as defined by <em>MODEL</em>.</li><li>Output: Forecast files (spectral files <strong>ICMSHALAD+***). In case of AROME, Surfex files containing the surface data (</strong>AROMOUT_*.lfi**). </li></ul><h3 id="Forecast-namelists-1"><a class="docs-heading-anchor" href="#Forecast-namelists-1">Forecast namelists</a><a class="docs-heading-anchor-permalink" href="#Forecast-namelists-1" title="Permalink"></a></h3><p>The current switches in the HARMONIE system (in <a href="https://hirlam.org/trac/browser/Harmonie/ecf/config_exp.h">config_exp.h</a>) provide only very limited possibility to control the different aspects of the model. If the user wants to have more detailed control on the specific schemes etc., one has to modify the variety of the namelists options.</p><p>In general, the different namelist options are documented in the source code modules (e.g. src/arp/module/*.F90). Below is listed information on some of the choices.   </p><p><strong>NH-dynamics/advection/time stepping</strong>:</p><ul><li>A detailed overview of the such options has been given by <a href="http://www.cnrm.meteo.fr/gmapdoc/spip.php?article189">Vivoda (2008)</a>. </li></ul><p><strong>Upper air physics switches</strong></p><ul><li>Switches related to different schemes of ALADIN/ALARO physics, <a href="https://hirlam.org/trac/browser/Harmonie/src/arp/module/yomphy.F90">yomphy.F90</a>.</li><li>Switches related to physics schemes in AROME <a href="https://hirlam.org/trac/browser/Harmonie/src/arp/module/yomarphy.F90">yomarphy.F90</a>.</li><li>Switches to tune different aspects of physics, <a href="https://hirlam.org/trac/browser/Harmonie/src/arp/module/yomphy0.F90">yomphy0.F90</a>, <a href="https://hirlam.org/trac/browser/Harmonie/src/arp/module/yomphy1.F90">yomphy1.F90</a>, <a href="https://hirlam.org/trac/browser/Harmonie/src/arp/module/yomphy2.F90">yomphy2.F90</a> and <a href="https://hirlam.org/trac/browser/Harmonie/src/arp/module/yomphy3.F90">yomphy3.F90</a></li><li>Switches related to HIRLAM physics, <a href="https://hirlam.org/trac/browser/Harmonie/src/arp/module/yhloption.F90">yhloption.F90</a> and <a href="https://hirlam.org/trac/browser/Harmonie/src/arp/setup/suhloption.F90">suhloption.F90</a>.</li></ul><p><strong>Initialization switch</strong></p><ul><li>Initialization is controlled by namelist <em>NAMINI/NEINI</em>, <a href="https://hirlam.org/trac/browser/Harmonie/src/arp/module/yomini.F90">yomini.F90</a>.</li></ul><p><strong>Horizontal diffusion switches</strong></p><ul><li>Horizontal diffusion is controlled by namelist *NAMDYN/RDAMP**, <a href="https://hirlam.org/trac/browser/Harmonie/src/arp/module/yomdyn.F90#L55">yomdyn.F90</a>. Larger the coefficient, less diffusion.</li></ul><p><strong>MPP switches</strong></p><ul><li>The number of processors in HARMONIE are given in <a href="https://hirlam.org/trac/browser/Harmonie/config-sh/submit.ecgb">submit.HOST</a>. These values are transfered in to <a href="https://hirlam.org/trac/browser/Harmonie/src/arp/module/yomct0.F90#L276">yomct0.F90</a> and <a href="https://hirlam.org/trac/browser/Harmonie/src/arp/module/yommp.F90">yommp.F90</a>.</li></ul><p><strong>Surface SURFEX switches</strong></p><ul><li>The SURFEX scheme is controlled through namelist settings in <a href="https://hirlam.org/trac/browser/Harmonie/nam/surfex_namelists.pm">surfex_namelists.pm</a>. <a href="../HarmonieSystemDocumentation/Namelists.md#surfex_namelists.pm">The different options are described here</a>.</li></ul><h2 id="Archiving-1"><a class="docs-heading-anchor" href="#Archiving-1">Archiving</a><a class="docs-heading-anchor-permalink" href="#Archiving-1" title="Permalink"></a></h2><p>Archiving has a two layer structure. Firstly, all the needed analysis forecast and field extract files   are stored in <em>ARCHIVE</em> directory by <a href="https://hirlam.org/trac/browser/Harmonie/scr/Archive_fc">Archive_fc</a>. This is the  place where the postprocessing step expects to find the files. </p><p>At ECMWF all the requested files are stored to ECFS into directory <em>ECFSLOC</em> by the script <a href="https://hirlam.org/trac/browser/Harmonie/scr/Archive_ECMWF">Archive_ECMWF</a></p><h2 id="[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><a class="docs-heading-anchor" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><a href="../HarmonieSystemDocumentation.md">Back to the main page of the HARMONIE System Documentation</a></a><a class="docs-heading-anchor-permalink" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../DigitialFilterInitialization/">« DFI</a><a class="docs-footer-nextpage" href="../PostPP/Obsmon/">Obsmon »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 6 September 2021 15:27">Monday 6 September 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
