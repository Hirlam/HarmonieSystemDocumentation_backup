<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Phasing information · Harmonie wiki</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit">Harmonie wiki</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Running at ECMWF and local</span><ul><li><a class="tocitem" href="../Harmonie-mSMS/">Running at ECMWF</a></li><li><a class="tocitem" href="../Fast_start_on_cca/">Fast start on cca</a></li><li><a class="tocitem" href="../QuickStartLocal/">Quick start local</a></li></ul></li><li><span class="tocitem">Installation</span><ul><li><a class="tocitem" href="../Installation/">Installation</a></li><li><a class="tocitem" href="../General/">General Software Requirements</a></li><li><a class="tocitem" href="../Build_with_makeup/">Makeup</a></li><li><a class="tocitem" href="../StandaloneOdb/">Stand Alone ODB</a></li><li><a class="tocitem" href="../Redhat7Install/">Redhat7</a></li><li><a class="tocitem" href="../Centos6Install/">Centos6</a></li></ul></li><li><a class="tocitem" href="../TheHarmonieScript/">The Harmonie Script</a></li><li><a class="tocitem" href="../DrHook/">Profiling and Traceback</a></li><li><a class="tocitem" href="../FileFormats/">File Formats</a></li><li><span class="tocitem">Job Scheduling</span><ul><li><a class="tocitem" href="../ECFLOW/">ECFlow</a></li><li><a class="tocitem" href="../scripts/mXCdp/">mXCdp</a></li><li><a class="tocitem" href="../scripts/mSMS/">mSMS</a></li></ul></li><li><span class="tocitem">Testbed and Mitraillette</span><ul><li><a class="tocitem" href="../Evaluation/HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../Evaluation/Mitraillette/">Mitraillette</a></li></ul></li><li><span class="tocitem">Directories  and Binaries</span><ul><li><a class="tocitem" href="../Content/">Directories</a></li><li><a class="tocitem" href="../Binaries/">Binaries</a></li></ul></li><li><span class="tocitem">Configuration</span><ul><li><a class="tocitem" href="../ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../Namelists/">Namelist</a></li><li><a class="tocitem" href="../UpdateNamelists/">Update Namelist</a></li><li><a class="tocitem" href="../ModelDomain/">Model Domain</a></li><li><a class="tocitem" href="../VerticalGrid/">Vertical Grid</a></li><li><a class="tocitem" href="../ClimateSimulation/">Climate Simulation</a></li><li><a class="tocitem" href="../How_to_use_hires_topography/">Hires topography</a></li></ul></li><li><span class="tocitem">ECFlow tasks</span><ul><li><a class="tocitem" href="../ClimateGeneration/">Climate</a></li><li><input class="collapse-toggle" id="menuitem-11-2" type="checkbox"/><label class="tocitem" for="menuitem-11-2"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../UseofObservation/">Use of Observation</a></li><li><a class="tocitem" href="../ObservationOperators/">Observation operators</a></li><li><a class="tocitem" href="../ObservationHowto/GNSS/">GNSS ZTD observations</a></li><li><a class="tocitem" href="../ObservationHowto/Amv/">Atmospheric Motion Vectors (AMV)</a></li><li><a class="tocitem" href="../RadarData/">Assimilation of Radar Data</a></li><li><input class="collapse-toggle" id="menuitem-11-2-6" type="checkbox"/><label class="tocitem" for="menuitem-11-2-6"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../ObservationPreprocessing/ObservationData/">Observation data</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Cope/">Cope</a></li></ul></li></ul></li><li><a class="tocitem" href="../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../BoundaryFilePreparation/">Boundaries</a></li><li><a class="tocitem" href="../Screening/">Screening</a></li><li><a class="tocitem" href="../Analysis/SurfaceAnalysis/">Surface Analysis</a></li><li><a class="tocitem" href="../DigitialFilterInitialization/">DFI</a></li><li><a class="tocitem" href="../Forecast/">Forecast</a></li><li><input class="collapse-toggle" id="menuitem-11-10" type="checkbox"/><label class="tocitem" for="menuitem-11-10"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PostPP/Obsmon/">Obsmon</a></li><li><a class="tocitem" href="../PostPP/Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../PostPP/xtool/">xtool</a></li><li><a class="tocitem" href="../PostPP/gl/Interpolation/">GL interpolation</a></li><li><input class="collapse-toggle" id="menuitem-11-10-5" type="checkbox"/><label class="tocitem" for="menuitem-11-10-5"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PostPP/Verification/">HARMONIE Verification</a></li><li><a class="tocitem" href="../PostPP/Extract4verification/">-</a></li></ul></li><li><a class="tocitem" href="../PostPP/Fullpos/">Fullpos</a></li><li><a class="tocitem" href="../PostPP/FileConversions/">FileConversion</a></li><li><a class="tocitem" href="../PostPP/gl_grib_api/">gl<em>grib</em>api</a></li></ul></li></ul></li><li><span class="tocitem">Other</span><ul><li><a class="tocitem" href="../Scalability_and_Refactoring/">Scalability and refactoring</a></li><li><a class="tocitem" href="../HarmonieBenchMark/">Harmonie RAPS benchmark</a></li><li><a class="tocitem" href="../MFaccess/">Using Météo-France Servers</a></li><li class="is-active"><a class="tocitem" href>Phasing information</a><ul class="internal"><li><a class="tocitem" href="#Introduction-1"><span>Introduction</span></a></li><li><a class="tocitem" href="#Access-to-external-Meteo-France-git-repository-1"><span>Access to external Meteo France git repository</span></a></li><li><a class="tocitem" href="#git-subversion-merging-1"><span>git -&gt; subversion merging</span></a></li><li><a class="tocitem" href="#Subversion-MF-git:-Create-a-&quot;contributions-from-hirlam&quot;-branch-1"><span>Subversion -&gt; MF git: Create a &quot;contributions-from-hirlam&quot; branch</span></a></li><li><a class="tocitem" href="#Getting-namelists-used-at-Meteo-France-1"><span>Getting namelists used at Meteo-France</span></a></li><li><a class="tocitem" href="#Preparations-before-phasing-1"><span>Preparations before phasing</span></a></li><li><a class="tocitem" href="#HARMONIE-phasing-efforts-1"><span>HARMONIE phasing efforts</span></a></li><li><a class="tocitem" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><span>Back to the main page of the HARMONIE System Documentation</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Other</a></li><li class="is-active"><a href>Phasing information</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Phasing information</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://hirlam.org/trac//wiki//HarmonieSystemDocumentation/Phasing?action=edit" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Phasing-information-1"><a class="docs-heading-anchor" href="#Phasing-information-1">Phasing information</a><a class="docs-heading-anchor-permalink" href="#Phasing-information-1" title="Permalink"></a></h1><p>Version (trunk,<a href="../HarmonieSystemDocumentation/40h1.1/Phasing.md">40h1.1</a>)</p><h2 id="Introduction-1"><a class="docs-heading-anchor" href="#Introduction-1">Introduction</a><a class="docs-heading-anchor-permalink" href="#Introduction-1" title="Permalink"></a></h2><p>In the following we describe the procedure to interface the HIRLAM subversion repository to the git repository at Météo France. Further on, the tasks of the phasers and procedure to create a new branch are described. A course was held at Météo France in 2010 on the subject of <em>Maintenance Training</em>. Some of the presentations made at this <em>Maintenance Training</em> course may still be of use. They are available from this !GmapDoc web page: <a href="http://www.cnrm.meteo.fr/gmapdoc/spip.php?article208&amp;lang=en">http://www.cnrm.meteo.fr/gmapdoc/spip.php?article208&amp;lang=en</a></p><h2 id="Access-to-external-Meteo-France-git-repository-1"><a class="docs-heading-anchor" href="#Access-to-external-Meteo-France-git-repository-1">Access to external Meteo France git repository</a><a class="docs-heading-anchor-permalink" href="#Access-to-external-Meteo-France-git-repository-1" title="Permalink"></a></h2><p>Meteo France have a mirror of their git repository located outside of all firewalls. To be able to access the firewall you have to by granted access by providing a public SSH key to Meteo France. Once this is done you can clone the repository by:</p><pre><code class="language-bash">git clone ssh://reader054@git.cnrm-game-meteo.fr/git/arpifs.git</code></pre><p>Note that this is only for read access. To arrange access to the repository please contact the HIRLAM system manager.</p><h2 id="git-subversion-merging-1"><a class="docs-heading-anchor" href="#git-subversion-merging-1">git -&gt; subversion merging</a><a class="docs-heading-anchor-permalink" href="#git-subversion-merging-1" title="Permalink"></a></h2><p>This section of the phasing documentation provides instructions on how to retrieve . In here we assume you have the access rights and the knowledge to connect to the right computers (Météo France git repositories can be accessed from &#39;merou&#39;). Details on how to access Météo France servers are available here: <a href="../HarmonieSystemDocumentation/MFaccess.md">wiki:HarmonieSystemDocumentation/MFaccess</a>.</p><ul><li>Set up git for the first time: Météo France provide documentation on how to set up and use their git repository here: <a href="http://www.cnrm.meteo.fr/gmapdoc/spip.php?article218&amp;var_lang=en">http://www.cnrm.meteo.fr/gmapdoc/spip.php?article218&amp;var_lang=en</a>. A git user account must be requested from gco at Météo France. </li></ul><p>Add the following lines to your HOME/.bashrc file (replacing <strong>yourusername</strong> with your user name):</p><pre><code class="language-bash">export GIT_INSTALL=&quot;/home/marp001/git-install&quot;
export GIT_ROOTPACK=&quot;git://mirage&quot;
export GIT_HOMEPACK=&quot;/home/mrpe/yourusername/git-dev&quot;
export GIT_WORKDIR=&quot;/home/mrpe/yourusername/.git-workdir&quot;

export PATH=/home/marp001/git-install/default/bin:/home/marp001/git-install/default/libexec/git-core:/home/marp001/git-install/client/default/
bin:$PATH</code></pre><p>I issued the <strong>git_start</strong> command (in /home/marp001/git-install/client/default/bin) to initialize a git repository in my own account on merou:</p><pre><code class="language-bash">git_start    ### this will require your git userid and password</code></pre><ul><li>To get the latest tagged version of the source code:</li></ul><pre><code class="language-bash">cd $HOME/git-dev/arpifs/
git tag  ### this command will list available tags in the git repository
git archive --format=tar -o /home/mrpe/whelane/CY40_t1.04.tar --prefix=CY40_t1.04/ CY40_t1.04
cd $HOME
gzip /home/mrpe/whelane/CY40_t1.04.tar</code></pre><ul><li>ftp this zipped tar-ball to wherever you plan to carry out your merging activities.</li></ul><ul><li>Continue with the <strong>Merge into vendor branch</strong> instructions.</li></ul><h3 id="Merge-into-vendor-branch-1"><a class="docs-heading-anchor" href="#Merge-into-vendor-branch-1">Merge into vendor branch</a><a class="docs-heading-anchor-permalink" href="#Merge-into-vendor-branch-1" title="Permalink"></a></h3><p>To import source code from an external vendor we use the script auto<em>svn</em>load_dirs.pl in contrib/util.</p><p>Unpack your tar file in a directory with a proper name, e.g. CY40_t1.04, and rename the standard projects and remove some projects not used by Harmonie. (Further details on the !ClearCase/GIT/PERFORCE project naming are available here: <a href="http://www.cnrm.meteo.fr/gmapdoc/IMG/pdf/ykarchi40.pdf">http://www.cnrm.meteo.fr/gmapdoc/IMG/pdf/ykarchi40.pdf</a>).</p><pre><code class="language-bash">gunzip CY40_t1.04.tar.gz 
tar -xvf CY40_t1.04.tar 
ls CY40_t1.04
cd CY40_t1.04
mv aeolus/ aeo
mv aladin/ ald
mv arpifs/ arp
mv biper/ bip
mv blacklist/ bla
mv satrad/ sat
mv surf sur
mv etrans/ tal
mv trans/ tfl
mv utilities/ uti
mv algor/ xla
mv ifsaux/ xrd
rm -rf cope/ obstat/ scripts/ scat/</code></pre><p>Check out vendor/aladin/current as current-wc in a parallel directory:</p><pre><code class="language-bash">svn co https://svn.hirlam.org/vendor/aladin/current current-wc</code></pre><p>Now we are ready to start the merge:</p><pre><code class="language-bash">auto_svn_load_dirs.pl -v -wc current-wc https://svn.hirlam.org/vendor/aladin current CY40_t1.04</code></pre><p>This will present you with a list of all the files that seem to have been moved. You then get a chance to have the script &quot;Guess&quot; what the corrective action should be. You can accept or reject that choice for every file separately.</p><p>When all files have been processed, choose &quot;Finish&quot; to have the script complete the update to vendor/aladin/current and commit the changes.</p><p>Subsequently, tag the new vendor/aladin/current:</p><pre><code class="language-bash">svn copy -m &quot;Tag vendor/aladin/current as vendor/aladin/cy40t1.04.&quot; https://svn.hirlam.org/vendor/aladin/current https://svn.hirlam.org/vendor/aladin/cy40t1.04</code></pre><h3 id="Merge-new-vendor-copy-into-phasing-branch-1"><a class="docs-heading-anchor" href="#Merge-new-vendor-copy-into-phasing-branch-1">Merge new vendor copy into phasing branch</a><a class="docs-heading-anchor-permalink" href="#Merge-new-vendor-copy-into-phasing-branch-1" title="Permalink"></a></h3><p>Create a fresh working copy of the phasing branch (cy40):</p><pre><code class="language-bash">svn co https://svn.hirlam.org/branches/phasing/cy40 working-copy</code></pre><p>Perform the merge of the new source code. Note that &lt;previous-tag&gt; below should be the version used last time there was a merge from the vendor branch to the trunk.  If you pick the wrong version you could miss changes. Postpone every conflict by choosing &#39;p&#39;:</p><pre><code class="language-bash">svn merge https://svn.hirlam.org/vendor/aladin/&lt;previous-tag&gt; https://svn.hirlam.org/vendor/aladin/current working-copy/src</code></pre><p>Resolve the conflicts by using the script <a href="https://hirlam.org/trac/browser/trunk/contrib/util/svn_resolve.pl">svn_resolve.pl</a> (available in <a href="https://hirlam.org/trac/browser/trunk/contrib/util">contrib/util</a>):</p><pre><code class="language-bash">cd working-copy
svn_resolve.pl</code></pre><p>The script gives you the option to view various differences, edit the working copy and indicate to svn that the conflict has been resolved.</p><p><strong>In the end, the correct source has to end up in the file with the name of the original source.</strong> That name, with the extension &#39;.working&#39; means what&#39;s in the working-copy directory, with &#39;.merge-left&#39; means what&#39;s in the old vendor branch and with &#39;.merge-right&#39; what&#39;s in the new vendor branch.</p><p>After all conflicts have been resolved (sometimes it might be expedient to simply take the the updated file from the vendor branch and have researchers resolve conflicts afterwards), the final commit is in order (also from directory &#39;working-copy&#39;).</p><pre><code class="language-bash">svn commit</code></pre><h3 id="Alternatively,-merge-new-vendor-copy-into-trunk-1"><a class="docs-heading-anchor" href="#Alternatively,-merge-new-vendor-copy-into-trunk-1">Alternatively, merge new vendor copy into trunk</a><a class="docs-heading-anchor-permalink" href="#Alternatively,-merge-new-vendor-copy-into-trunk-1" title="Permalink"></a></h3><p>Create a fresh working copy of the trunk:</p><pre><code class="language-bash">svn co https://svn.hirlam.org/trunk/harmonie working-copy</code></pre><p>Perform the merge of the new source code. Note that &lt;previous-tag&gt; below should be the version used last time there was a merge from the vendor branch to the trunk.  If you pick the wrong version you could miss changes. Postpone every conflict by choosing &#39;p&#39;:</p><pre><code class="language-bash">svn merge https://svn.hirlam.org/vendor/aladin/&lt;previous-tag&gt; https://svn.hirlam.org/vendor/aladin/current working-copy/src</code></pre><p>Resolve the conflicts by using the script <a href="https://hirlam.org/trac/browser/trunk/contrib/util/svn_resolve.pl">svn_resolve.pl</a> (available in <a href="https://hirlam.org/trac/browser/trunk/contrib/util">contrib/util</a>):</p><pre><code class="language-bash">cd working-copy
svn_resolve.pl</code></pre><p><strong>In the end, the correct source has to end up in the file with the name of the original source.</strong> That name, with the extension &#39;.working&#39; means what&#39;s in the working-copy directory, with &#39;.merge-left&#39; means what&#39;s in the old vendor branch and with &#39;.merge-right&#39; what&#39;s in the new vendor branch.</p><p>After all conflicts have been resolved (sometimes it might be expedient to simply take the the updated file from the vendor branch and have researchers resolve conflicts afterwards), the final commit is in order (also from directory &#39;working-copy&#39;).</p><pre><code class="language-bash">svn commit</code></pre><h3 id="Reverting-tree-conflicts-1"><a class="docs-heading-anchor" href="#Reverting-tree-conflicts-1">Reverting tree conflicts</a><a class="docs-heading-anchor-permalink" href="#Reverting-tree-conflicts-1" title="Permalink"></a></h3><p>Just a short note to save time ...If you come accross a conflict such as the one below ...</p><pre><code class="language-bash">!     C surfex/SURFEX/.isba_fluxes.F90.swp
      &gt;   local delete, incoming delete upon merge</code></pre><p>one can try the following procedure:</p><pre><code class="language-bash">touch src/surfex/SURFEX/.isba_fluxes.F90.swp
svn revert  src/surfex/SURFEX/.isba_fluxes.F90.swp</code></pre><h2 id="Subversion-MF-git:-Create-a-&quot;contributions-from-hirlam&quot;-branch-1"><a class="docs-heading-anchor" href="#Subversion-MF-git:-Create-a-&quot;contributions-from-hirlam&quot;-branch-1">Subversion -&gt; MF git: Create a &quot;contributions-from-hirlam&quot; branch</a><a class="docs-heading-anchor-permalink" href="#Subversion-MF-git:-Create-a-&quot;contributions-from-hirlam&quot;-branch-1" title="Permalink"></a></h2><p>Every development cycle there is the opportunity to add contributions or bug fixes from the HIRLAM consortium to IFS. This is done by creating a git branch off the latest version of that cycle. These HIRLAM contribution branches are then &quot;posted&quot; to the MF git SCR and GCO staff.</p><h3 id="Create-a-send-branch-and-add-HIRLAM-contributions-1"><a class="docs-heading-anchor" href="#Create-a-send-branch-and-add-HIRLAM-contributions-1">Create a send branch and add HIRLAM contributions</a><a class="docs-heading-anchor-permalink" href="#Create-a-send-branch-and-add-HIRLAM-contributions-1" title="Permalink"></a></h3><p>Create a &quot;send&quot; branch based on the latest tagged vendor version. In the example below the vendor tag of cy40t1.04 is copied to the second contribution branch in the Harmonie phasing branch.</p><pre><code class="language-bash">svn cp https://svn.hirlam.org/vendor/aladin/cy40t1.04 https://svn.hirlam.org/branches/phasing/cy40_send2</code></pre><p>Commit agreed contributions from the Harmonie phasing branch to the send branch, cy40_send2 for example.</p><h3 id="Create-MF-git-branch(es)-containing-HIRLAM-contributions-1"><a class="docs-heading-anchor" href="#Create-MF-git-branch(es)-containing-HIRLAM-contributions-1">Create MF git branch(es) containing HIRLAM contributions</a><a class="docs-heading-anchor-permalink" href="#Create-MF-git-branch(es)-containing-HIRLAM-contributions-1" title="Permalink"></a></h3><p>Log in to merou.meteo.fr and prepare the HIRLAM send branch code for a final comparison with the MF </p><pre><code class="language-bash">cd $HOME
mkdir hirlam_sends
cd hirlam_sends
svn export https://svn.hirlam.org/branches/phasing/cy40_send2 cy40_send2_export
cp -r cy40_send2_export cy40_send2_gitexport
cd cy40_send2_gitexport
mv aeo aeolus
mv ald aladin
mv arp arpifs
mv bip biper
mv bla blacklist
mv obt obstat
mv sat satrad
mv sur surf
mv tal etrans
mv tfl trans
mv uti utilities
mv xrd ifsaux
mv xla algor
cd ~/git-dev/arpifs/
git pull
git branch CY40_bf.01_hirlam tags/CY40_bf.01
git checkout CY40_bf.01_hirlam
cd ~/hirlam_sends/
diff -r cy40_send2_gitexport/ ~/git-dev/arpifs/ &gt; diffs.txt</code></pre><p>Have a quick look in diffs.txt to ensure the send branch code contains the intended differences.</p><p>Ensure your account is readable so that when you &quot;post&quot; your branch GCO can read it:</p><pre><code class="language-bash">cd $HOME/../
chmod 755 username</code></pre><p>Now everything is in place to create some HIRLAM contribution git branches. In the following examples I will create two separate branches with two contributions from HIRLAM developers.</p><pre><code class="language-bash">cd ~/git-dev/arpifs/
git pull
git_branch -r 40 -b t1 -v 04 -u suparar_bugfix      # answer &quot;y&quot; to create this branch
git branch                                          # this lists git branches and &quot;*&quot; indicates the branch you are working in (should be gitUserName_CY40_suparar_bugfix)
cp ~/hirlam_sends/cy40_send2_gitexport/arpifs/phys_dmn/suparar.F90 arpifs/phys_dmn/suparar.F90
git status                                          # check on status
git add arpifs/phys_dmn/suparar.F90                 # add this change to your local git branch
git commit arpifs/phys_dmn/suparar.F90              # enter a useful commit message
git_post                                            # this command &quot;posts&quot; your git branch (this may be the same as/similar to git push)</code></pre><p>You should receive an e-mail from gco@meteo.fr acknowledging your branch posting. </p><p>Now &quot;move&quot; back out of this new branch:</p><pre><code class="language-bash">git checkout gco_CY40_t1
git fetch
git branch</code></pre><p>Now an example involving the movement of files:</p><pre><code class="language-bash">git_branch -r 40 -b t1 -v 04 -u lfi_sub_move
git branch
git mv ifsaux/programs/fadate.F90 ifsaux/misc/
git mv ifsaux/programs/fadiff.F90 ifsaux/misc/
git mv ifsaux/programs/lfi_alt_copy.F90 ifsaux/misc/
git mv ifsaux/programs/lfi_alt_indx.F90 ifsaux/misc/
git mv ifsaux/programs/lfi_alt_pack.F90 ifsaux/misc/
git mv ifsaux/programs/lfifactm.F90 ifsaux/misc/
git status
git add ifsaux/misc/fadate.F90  ifsaux/misc/fadiff.F90 ifsaux/misc/lfi_alt_copy.F90 ifsaux/misc/lfi_alt_indx.F90 ifsaux/misc/lfi_alt_pack.F90 ifsaux/misc/lfifactm.F90
git commit
git_post</code></pre><h3 id="Send-GCO-an-e-mail-relating-to-HIRLAM-contributions-1"><a class="docs-heading-anchor" href="#Send-GCO-an-e-mail-relating-to-HIRLAM-contributions-1">Send GCO an e-mail relating to HIRLAM contributions</a><a class="docs-heading-anchor-permalink" href="#Send-GCO-an-e-mail-relating-to-HIRLAM-contributions-1" title="Permalink"></a></h3><p>MF request that each contribution branch is accompanied with an e-mail (To:gco@meteo.fr cc: claude.fischer@meteo.fr, Ulf.Andrae@smhi.se) containing the following information:</p><ul><li>Title/header of email should read like:  &quot;dev&quot;  name<em>of</em>target<em>cycle  short</em>title<ul><li>name<em>of</em>target_cycle  should be CY40 or CY40T1 etc ...</li><li>short_title  can be either to announce that this is a bugfix or a specific contribution for R&amp;D: &quot;Correction of a bug in Full-Pos&quot;   or  &quot;Additional code for handling Aeolus in ODB&quot;   or  &quot;Hirlam contribution to CY40&quot;   etc ...</li></ul></li></ul><ul><li>Date and name of Contributor:</li></ul><p>dd/mm/yyyy Name (MF Service, Aladin or Hirlam partner)</p><ul><li>Model or configuration affected by the modset:<ul><li>arpege, aladin-france, aladin-réunion, arome, aearp, pearp,...</li><li>for partners: alaro, arome, harmonie (but you may be more specific about harmonie-alaro or harmonie-arome)</li></ul></li></ul><ul><li>Context and cycle:<ul><li>context: oper, double, dev   =&gt; refers to MF environment. dev =&gt; for partners</li><li>cycle example: 40<em>op1 (MF only), 40</em>bf.01 (bugfix), 40_t1 (pre-cycle during phasing)</li></ul></li></ul><ul><li>Type of file/resource to be modified:</li></ul><p>Namelist, Binary, climatology file, file of constant fields (sigma_b, ...), blacklist, ...   =&gt; mostly &quot;Binary&quot; (i.e. code changes) and &quot;namelist&quot; seem relevant for partners</p><ul><li>Description of the set of modifications:</li></ul><p>... a more or less detailed text about the code changes: purpose, how it was done, what is the impact on results or performances, options still under work ...</p><ul><li>Details about the provided files:<ul><li>if source code changes: name of GIT branch &amp; list of modified/added/deleted routines/files</li><li>if &quot;files of constants&quot;:  (...)  (only MF, irrelevant for partners)</li><li>if namelist change: name of namelist block, delta of namelist and/or location of namelist file  (probably only relevant to MF)</li></ul></li></ul><h2 id="Getting-namelists-used-at-Meteo-France-1"><a class="docs-heading-anchor" href="#Getting-namelists-used-at-Meteo-France-1">Getting namelists used at Meteo-France</a><a class="docs-heading-anchor-permalink" href="#Getting-namelists-used-at-Meteo-France-1" title="Permalink"></a></h2><p>Log in to yuki (or tori). Then run the command <strong>genv</strong> (you may have to add /mf/dp/marp/marp001/public/bin to your PATH if you don&#39;t have it already):</p><pre><code class="language-bash">mrpe726@yuki:~&gt; genv
usage (1) : genv suite-model:YYYY/MM/DD[-RXX]

            suite = oper dble test
            model = arpege aladin tropique mocage restart peace reunion alacep arome varpack tsr aria algerie qatar libye testmp1 testmp2

usage (2) : genv suite-model

            suite = oper dble test
            model = arpege aladin tropique mocage restart peace reunion alacep arome varpack tsr aria algerie qatar libye testmp1 testmp2

	    NB: same as (1) - today&#39;s date is automatically added

usage (3) : genv cycle-id
       ex : genv cy33t0_op1.23</code></pre><p>Note that there are no namelists for ALARO. Anyway, to get e.g. the current AROME namelists:</p><pre><code class="language-bash">mrpe726@yuki:~&gt; genv oper-arome | grep NAMELIST
NAMELIST_ALADIN=&quot;al35t2_arome-op1.16.nam&quot;
NAMELIST_AROME=&quot;al35t2_arome-op1.16.nam&quot;
NAMELIST_UTILITIES=&quot;ut35t2_arome-op1.04.nam&quot;</code></pre><p>To actually get the namelists, run the command <strong>gget</strong></p><pre><code class="language-bash">mrpe726@yuki:~&gt; gget al35t2_arome-op1.16.nam</code></pre><p>You get a lot of namelists in a directory named NAMELIST_AROME</p><pre><code class="language-bash">mrpe726@yuki:~&gt; cd al35t2_arome-op1.16.nam/
mrpe726@yuki:~/al35t2_arome-op1.16.nam&gt; ls
diff.al35t2_arome-op1.15.nam  namel_ee927_surf.franxl    namel_lamflag_odb.midpyr  namel_sude_off_fp0
list.al35t2_arome-op1.16.nam  namel_ee927_surf.midpyr    namel_lamflag_odb.nore    namel_surfex_output
namel_bret_off_fp             namel_ee927_surf.nore      namel_lamflag_odb.pari    README
namel_bret_off_fp0            namel_ee927_surf.pari      namel_lamflag_odb.sude    select_bret_off_fp
namel_cplsurf_def             namel_ee927_surf.sude      namel_midpyr_off_fp       select_bret_off_fp0
namel_ee927_bret_cpl          namel_fpos_bret_addsurf    namel_midpyr_off_fp0      select_fran_off_fp
namel_ee927_bret_cpl0         namel_fpos_fran_addsurf    namel_minim               select_fran_off_fp0
namel_ee927_fran_cpl          namel_fpos_franxl_addsurf  namel_nore_off_fp         select_franxl_fp
namel_ee927_fran_cpl0         namel_fpos_midpyr_addsurf  namel_nore_off_fp0        select_franxl_fp0
namel_ee927_franxl_cpl        namel_fpos_nore_addsurf    namel_pari_off_fp         select_franxl_off_fp
namel_ee927_franxl_cpl0       namel_fpos_pari_addsurf    namel_pari_off_fp0        select_franxl_off_fp0
namel_ee927_midpyr_cpl        namel_fpos_sude_addsurf    namel_previ_dyn_off       select_midpyr_off_fp
namel_ee927_midpyr_cpl0       namel_fran_off_fp          namel_previ_off           select_midpyr_off_fp0
namel_ee927_nore_cpl          namel_fran_off_fp0         namel_previ_surfex        select_nore_off_fp
namel_ee927_nore_cpl0         namel_franxl_off_fp        namel_progrele            select_nore_off_fp0
namel_ee927_pari_cpl          namel_franxl_off_fp0       namel_pseudotraj          select_pari_off_fp
namel_ee927_pari_cpl0         namel_franxl_previ         namel_rgb                 select_pari_off_fp0
namel_ee927_sude_cpl          namel_franxl_previ_dyn     namel_rgb_met8            select_sude_off_fp
namel_ee927_sude_cpl0         namel_lamflag_odb.bret     namel_rgb_met9            select_sude_off_fp0
namel_ee927_surf.bret         namel_lamflag_odb.fran     namel_screen
namel_ee927_surf.fran         namel_lamflag_odb.franxl   namel_sude_off_fp</code></pre><h2 id="Preparations-before-phasing-1"><a class="docs-heading-anchor" href="#Preparations-before-phasing-1">Preparations before phasing</a><a class="docs-heading-anchor-permalink" href="#Preparations-before-phasing-1" title="Permalink"></a></h2><p>Read the Meteo France webpage about phasing [http://www.cnrm.meteo.fr/aladin/spip.php?article63].</p><h2 id="HARMONIE-phasing-efforts-1"><a class="docs-heading-anchor" href="#HARMONIE-phasing-efforts-1">HARMONIE phasing efforts</a><a class="docs-heading-anchor-permalink" href="#HARMONIE-phasing-efforts-1" title="Permalink"></a></h2><p><a href="../Phasing/cy38t1.md">cy38t1</a></p><p><a href="../Phasing/cy39t1.md">cy39t1</a></p><p><a href="../Phasing/cy40t1.md">cy40t1</a></p><p><a href="../Phasing/cy41t1.md">cy41t1</a></p><p><a href="../Phasing/cy42t1.md">cy42t1</a></p><p><a href="../Phasing/LUNBC_in_cy43t1.md">LUNBC<em>in</em>cy43t1</a></p><p><a href="../Phasing/cy45t1.md">cy45t1</a></p><p><a href="../Phasing/cy46t1.md">cy46t1</a></p><h3 id="Testbed-experiments-1"><a class="docs-heading-anchor" href="#Testbed-experiments-1">Testbed experiments</a><a class="docs-heading-anchor-permalink" href="#Testbed-experiments-1" title="Permalink"></a></h3><p>The Harmonie testbed is a tool to help you verify the technical functionality of the system. It runs through all meaningful configurations in an efficient manner.  Read more <a href="../HarmonieSystemDocumentation/Evaluation/HarmonieTestbed.md">here</a>.</p><h3 id="Update-documentation-1"><a class="docs-heading-anchor" href="#Update-documentation-1">Update documentation</a><a class="docs-heading-anchor-permalink" href="#Update-documentation-1" title="Permalink"></a></h3><p>The final task at the end of the phasing is to tag the documentation with the current version number. The documentation has of course been updated continuously but might need a final review before tagging. Some scripts to make tagging easier is attached to this page. After tagging the new pages may be loaded to the wiki using the trac-admin tool on hirlam.org.</p><pre><code class="language-bash">trac-admin /data/www/trac_hirlam_env/ wiki load MYDIR</code></pre><p>where MYDIR is a directory containing the revised wiki pages. You must have TRAC_ADMIN permissions to be able to use the trac-admin tool.</p><h2 id="[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><a class="docs-heading-anchor" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><a href="../HarmonieSystemDocumentation.md">Back to the main page of the HARMONIE System Documentation</a></a><a class="docs-heading-anchor-permalink" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../MFaccess/">« Using Météo-France Servers</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 6 September 2021 15:20">Monday 6 September 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
