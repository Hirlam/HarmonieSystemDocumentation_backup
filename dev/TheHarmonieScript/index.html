<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>The Harmonie Script · Harmonie wiki</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit">Harmonie wiki</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Running at ECMWF and local</span><ul><li><a class="tocitem" href="../Harmonie-mSMS/">Running at ECMWF</a></li><li><a class="tocitem" href="../Fast_start_on_cca/">Fast start on cca</a></li><li><a class="tocitem" href="../QuickStartLocal/">Quick start local</a></li></ul></li><li><span class="tocitem">Installation</span><ul><li><a class="tocitem" href="../Installation/">Installation</a></li><li><a class="tocitem" href="../General/">General Software Requirements</a></li><li><a class="tocitem" href="../Build_with_makeup/">Makeup</a></li><li><a class="tocitem" href="../StandaloneOdb/">Stand Alone ODB</a></li><li><a class="tocitem" href="../Redhat7Install/">Redhat7</a></li><li><a class="tocitem" href="../Centos6Install/">Centos6</a></li></ul></li><li class="is-active"><a class="tocitem" href>The Harmonie Script</a><ul class="internal"><li><a class="tocitem" href="#The-Harmonie-main-script-1"><span>The Harmonie main script</span></a></li><li><a class="tocitem" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><span>Back to the main page of the HARMONIE System Documentation</span></a></li></ul></li><li><a class="tocitem" href="../DrHook/">Profiling and Traceback</a></li><li><a class="tocitem" href="../FileFormats/">File Formats</a></li><li><span class="tocitem">Job Scheduling</span><ul><li><a class="tocitem" href="../ECFLOW/">ECFlow</a></li><li><a class="tocitem" href="../scripts/mXCdp/">mXCdp</a></li><li><a class="tocitem" href="../scripts/mSMS/">mSMS</a></li></ul></li><li><span class="tocitem">Testbed and Mitraillette</span><ul><li><a class="tocitem" href="../Evaluation/HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../Evaluation/Mitraillette/">Mitraillette</a></li></ul></li><li><span class="tocitem">Directories  and Binaries</span><ul><li><a class="tocitem" href="../Content/">Directories</a></li><li><a class="tocitem" href="../Binaries/">Binaries</a></li></ul></li><li><span class="tocitem">Configuration</span><ul><li><a class="tocitem" href="../ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../Namelists/">Namelist</a></li><li><a class="tocitem" href="../UpdateNamelists/">Update Namelist</a></li><li><a class="tocitem" href="../ModelDomain/">Model Domain</a></li><li><a class="tocitem" href="../VerticalGrid/">Vertical Grid</a></li><li><a class="tocitem" href="../ClimateSimulation/">Climate Simulation</a></li><li><a class="tocitem" href="../How_to_use_hires_topography/">Hires topography</a></li></ul></li><li><span class="tocitem">ECFlow tasks</span><ul><li><a class="tocitem" href="../ClimateGeneration/">Climate</a></li><li><input class="collapse-toggle" id="menuitem-11-2" type="checkbox"/><label class="tocitem" for="menuitem-11-2"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../UseofObservation/">Use of Observation</a></li><li><a class="tocitem" href="../ObservationOperators/">Observation operators</a></li><li><a class="tocitem" href="../ObservationHowto/GNSS/">GNSS ZTD observations</a></li><li><a class="tocitem" href="../ObservationHowto/Amv/">Atmospheric Motion Vectors (AMV)</a></li><li><a class="tocitem" href="../RadarData/">Assimilation of Radar Data</a></li><li><input class="collapse-toggle" id="menuitem-11-2-6" type="checkbox"/><label class="tocitem" for="menuitem-11-2-6"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../ObservationPreprocessing/ObservationData/">Observation data</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Cope/">Cope</a></li></ul></li></ul></li><li><a class="tocitem" href="../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../BoundaryFilePreparation/">Boundaries</a></li><li><a class="tocitem" href="../Screening/">Screening</a></li><li><a class="tocitem" href="../Analysis/SurfaceAnalysis/">Surface Analysis</a></li><li><a class="tocitem" href="../DigitialFilterInitialization/">DFI</a></li><li><a class="tocitem" href="../Forecast/">Forecast</a></li><li><input class="collapse-toggle" id="menuitem-11-10" type="checkbox"/><label class="tocitem" for="menuitem-11-10"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PostPP/Obsmon/">Obsmon</a></li><li><a class="tocitem" href="../PostPP/Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../PostPP/xtool/">xtool</a></li><li><a class="tocitem" href="../PostPP/gl/Interpolation/">GL interpolation</a></li><li><input class="collapse-toggle" id="menuitem-11-10-5" type="checkbox"/><label class="tocitem" for="menuitem-11-10-5"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PostPP/Verification/">HARMONIE Verification</a></li><li><a class="tocitem" href="../PostPP/Extract4verification/">-</a></li></ul></li><li><a class="tocitem" href="../PostPP/Fullpos/">Fullpos</a></li><li><a class="tocitem" href="../PostPP/FileConversions/">FileConversion</a></li><li><a class="tocitem" href="../PostPP/gl_grib_api/">gl<em>grib</em>api</a></li></ul></li></ul></li><li><span class="tocitem">Other</span><ul><li><a class="tocitem" href="../Scalability_and_Refactoring/">Scalability and refactoring</a></li><li><a class="tocitem" href="../HarmonieBenchMark/">Harmonie RAPS benchmark</a></li><li><a class="tocitem" href="../MFaccess/">Using Météo-France Servers</a></li><li><a class="tocitem" href="../Phasing/">Phasing information</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>The Harmonie Script</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>The Harmonie Script</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://hirlam.org/trac//wiki//HarmonieSystemDocumentation/TheHarmonieScript?action=edit" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="The-Harmonie-main-script-1"><a class="docs-heading-anchor" href="#The-Harmonie-main-script-1">The Harmonie main script</a><a class="docs-heading-anchor-permalink" href="#The-Harmonie-main-script-1" title="Permalink"></a></h2><p>The Harmonie script is the main user interface to the harmonie system. It is used to setup, start, check and control your experiment and environment. Below follows the most useful commands. There are other commands inherited from the HIRLAM environment that may or may not work. For a full list check <a href="https://hirlam.org/trac/browser/Harmonie/scr/Start">Start</a>, <a href="https://hirlam.org/trac/browser/Harmonie/scr/Actions">Actions</a>, <a href="https://hirlam.org/trac/browser/Harmonie/scr/Actions.pl">Actions.pl</a>.</p><ul><li><code>Harmonie setup [ -r REVISION] [ -h HOST] [ -d DOMAIN] [ -c CONFIGURATION] [ -l LEVELS]</code> where:</li><li>REVISION is the path to the version of harmonie you are working with.</li><li>HOST is the name of the host you are working on. There should exist corresponding config-sh/config.HOST. </li><li>CONFIGURATION is one of the predefined configurations in scr/Harmonie_testbed.pl. It a fast way to setup your favourite configuration.</li><li>DOMAIN is one of the predefined domains in ecf/config_exp.h </li><li>LEVELS is one of the predefined level definitions in scr/Vertical_levels.pl</li></ul><ul><li><code>Harmonie start DTG=YYYYMMDDHH [ DTGEND=YYYYMMDDHH] [ optional environment variables]</code> launches a cold start run.<ul><li>DTG is the initial time of your experiment</li><li>Several other optional variables can be given like<ul><li>PLAYFILE=FILENAME use a different ecflow suite definition file. Default is harmonie.tdf</li><li>BUILD=yes|no to turn on and off compilation</li><li>CREATE_CLIMATE=yes|no to turn on and off generation of climate files</li><li>Any environment variable that you would like to send to the system.</li></ul></li></ul></li></ul><ul><li><code>Harmonie prod</code> will continue from the DTG given in your progress.log file. The rest of the arguments is as for <code>Harmonie start</code>. This should be used to continue and experiment. It is assumed that a first guess file is available and the run will fail if this is not found.    </li></ul><ul><li><code>Harmonie mon</code> will restart your ecflow_ui window and try to connect to an existing ecflow server.</li></ul><ul><li><code>Harmonie co [FILE|PATH/FILE]</code> will copy the request file from the version chosen in your setup ( as pointed out in the config-sh/hm_rev file ) to your local directory. If the PATH is not given a search will be done. If the name matches several files you will be given a list to choose from.</li></ul><ul><li><code>Harmonie install</code> will build your libraries and binaries but not start any experiment</li></ul><ul><li><code>Harmonie testbed</code> will launch the <a href="../HarmonieSystemDocumentation/Evaluation/HarmonieTestbed.md">Harmonie testbed</a></li></ul><ul><li><code>Harmonie diff [--xxdiff]</code> will look for differences between the revision in config-sh/hm<em>rev and HM</em>LIB.</li></ul><ul><li><code>Harmonie CleanUp -ALL -go</code> will clean the following directories: HM<em>DATA,HM</em>LIB,HM_EXP. Instructions from <a href="https://hirlam.org/trac/browser/Harmonie/scr/Actions.pl">Actions.pl</a>:</li></ul><pre><code class="language-bash"># args: if -go: remove, (default is to list but not remove the matching files)
#       if -k*: do not do the long term archive HM_EXP - so keep it
#       if -d*: combination of -k and -ALL (-d* means: disks)
#       if -ALL: treat all files and also (if -go) remove the directories
#       a pattern is usually a string without meta-characters. To this
#       a * is appended (so e.g. ob will affect all files ob*); this can
#       be inhibited by appending ~ (so ob~! translates to ob).
#       Also, files in all subdirectories P*_* will be affected
#       where P is the pattern [0-9][0-9], This resembles
#       a `CYCLEDIR&#39;. So ob will result in &#39;ob* P*_*/ob*&#39;.
#       The pattern P*_* will be prepended to every / in the pattern,
#       unless the / is preceded by ~ (which will be removed).
#       Hence, to remove e.g. all analyses from 1995, use 1995/an,
#       which translates to 1995[0-9][0-9]*_*/an*
#       (to be precise: use: CleanUp(&quot;REMOVE:1995/an&quot;, &quot;-go&quot;);</code></pre><h2 id="[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><a class="docs-heading-anchor" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><a href="../HarmonieSystemDocumentation.md">Back to the main page of the HARMONIE System Documentation</a></a><a class="docs-heading-anchor-permalink" href="#[Back-to-the-main-page-of-the-HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../Centos6Install/">« Centos6</a><a class="docs-footer-nextpage" href="../DrHook/">Profiling and Traceback »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 6 September 2021 15:20">Monday 6 September 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
