<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Vertical Grid · Harmonie wiki</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Harmonie wiki logo"/></a><div class="docs-package-name"><span class="docs-autofit">Harmonie wiki</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Running at ECMWF and local</span><ul><li><a class="tocitem" href="../Harmonie-mSMS/">Running at ECMWF</a></li><li><a class="tocitem" href="../Fast_start_on_cca/">Fast start on cca</a></li><li><a class="tocitem" href="../QuickStartLocal/">Quick start local</a></li></ul></li><li><span class="tocitem">Installation</span><ul><li><a class="tocitem" href="../Installation/">Installation</a></li><li><a class="tocitem" href="../General/">General Software Requirements</a></li><li><a class="tocitem" href="../Build_with_makeup/">Makeup</a></li><li><a class="tocitem" href="../StandaloneOdb/">Stand Alone ODB</a></li><li><a class="tocitem" href="../Redhat7Install/">Redhat7</a></li><li><a class="tocitem" href="../Centos6Install/">Centos6</a></li></ul></li><li><a class="tocitem" href="../TheHarmonieScript/">The Harmonie Script</a></li><li><a class="tocitem" href="../DrHook/">Profiling and Traceback</a></li><li><a class="tocitem" href="../FileFormats/">File Formats</a></li><li><span class="tocitem">Job Scheduling</span><ul><li><a class="tocitem" href="../ECFLOW/">ECFlow</a></li><li><a class="tocitem" href="../scripts/mXCdp/">mXCdp</a></li><li><a class="tocitem" href="../scripts/mSMS/">mSMS</a></li></ul></li><li><span class="tocitem">Testbed and Mitraillette</span><ul><li><a class="tocitem" href="../Evaluation/HarmonieTestbed/">Testbed</a></li><li><a class="tocitem" href="../Evaluation/Mitraillette/">Mitraillette</a></li></ul></li><li><span class="tocitem">Directories  and Binaries</span><ul><li><a class="tocitem" href="../Content/">Directories</a></li><li><a class="tocitem" href="../Binaries/">Binaries</a></li></ul></li><li><span class="tocitem">Configuration</span><ul><li><a class="tocitem" href="../ConfigureYourExperiment/">Experiment</a></li><li><a class="tocitem" href="../PlatformConfiguration/">Platform</a></li><li><a class="tocitem" href="../Namelists/">Namelist</a></li><li><a class="tocitem" href="../UpdateNamelists/">Update Namelist</a></li><li><a class="tocitem" href="../ModelDomain/">Model Domain</a></li><li class="is-active"><a class="tocitem" href>Vertical Grid</a><ul class="internal"><li><a class="tocitem" href="#[HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><span>HARMONIE System Documentation</span></a></li></ul></li><li><a class="tocitem" href="../ClimateSimulation/">Climate Simulation</a></li><li><a class="tocitem" href="../How_to_use_hires_topography/">Hires topography</a></li></ul></li><li><span class="tocitem">ECFlow tasks</span><ul><li><a class="tocitem" href="../ClimateGeneration/">Climate</a></li><li><input class="collapse-toggle" id="menuitem-11-2" type="checkbox"/><label class="tocitem" for="menuitem-11-2"><span class="docs-label">Observations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../UseofObservation/">Use of Observation</a></li><li><a class="tocitem" href="../ObservationOperators/">Observation operators</a></li><li><a class="tocitem" href="../ObservationHowto/GNSS/">GNSS ZTD observations</a></li><li><a class="tocitem" href="../ObservationHowto/Amv/">Atmospheric Motion Vectors (AMV)</a></li><li><a class="tocitem" href="../RadarData/">Assimilation of Radar Data</a></li><li><input class="collapse-toggle" id="menuitem-11-2-6" type="checkbox"/><label class="tocitem" for="menuitem-11-2-6"><span class="docs-label">Preprocessing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../ObservationPreprocessing/ObservationData/">Observation data</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Cope/">Cope</a></li></ul></li></ul></li><li><a class="tocitem" href="../ObservationPreprocessing/Bator/">Bator</a></li><li><a class="tocitem" href="../ObservationPreprocessing/Oulan/">Oulan</a></li><li><a class="tocitem" href="../BoundaryFilePreparation/">Boundaries</a></li><li><a class="tocitem" href="../Screening/">Screening</a></li><li><a class="tocitem" href="../Analysis/SurfaceAnalysis/">Surface Analysis</a></li><li><a class="tocitem" href="../DigitialFilterInitialization/">DFI</a></li><li><a class="tocitem" href="../Forecast/">Forecast</a></li><li><input class="collapse-toggle" id="menuitem-11-10" type="checkbox"/><label class="tocitem" for="menuitem-11-10"><span class="docs-label">Post Processing</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PostPP/Obsmon/">Obsmon</a></li><li><a class="tocitem" href="../PostPP/Diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../PostPP/xtool/">xtool</a></li><li><a class="tocitem" href="../PostPP/gl/Interpolation/">GL interpolation</a></li><li><input class="collapse-toggle" id="menuitem-11-10-5" type="checkbox"/><label class="tocitem" for="menuitem-11-10-5"><span class="docs-label">Verification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../PostPP/Verification/">HARMONIE Verification</a></li><li><a class="tocitem" href="../PostPP/Extract4verification/">-</a></li></ul></li><li><a class="tocitem" href="../PostPP/Fullpos/">Fullpos</a></li><li><a class="tocitem" href="../PostPP/FileConversions/">FileConversion</a></li><li><a class="tocitem" href="../PostPP/gl_grib_api/">gl<em>grib</em>api</a></li></ul></li></ul></li><li><span class="tocitem">Other</span><ul><li><a class="tocitem" href="../Scalability_and_Refactoring/">Scalability and refactoring</a></li><li><a class="tocitem" href="../HarmonieBenchMark/">Harmonie RAPS benchmark</a></li><li><a class="tocitem" href="../MFaccess/">Using Météo-France Servers</a></li><li><a class="tocitem" href="../Phasing/">Phasing information</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Configuration</a></li><li class="is-active"><a href>Vertical Grid</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Vertical Grid</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://hirlam.org/trac//wiki//HarmonieSystemDocumentation/VerticalGrid?action=edit" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="HARMONIE-Vertical-Model-Level-Definitions-1"><a class="docs-heading-anchor" href="#HARMONIE-Vertical-Model-Level-Definitions-1">HARMONIE Vertical Model Level Definitions</a><a class="docs-heading-anchor-permalink" href="#HARMONIE-Vertical-Model-Level-Definitions-1" title="Permalink"></a></h1><h3 id="**HARMONIE-vertical-coordinate**-1"><a class="docs-heading-anchor" href="#**HARMONIE-vertical-coordinate**-1"><strong>HARMONIE vertical coordinate</strong></a><a class="docs-heading-anchor-permalink" href="#**HARMONIE-vertical-coordinate**-1" title="Permalink"></a></h3><p>HARMONIE model, similar to that of HIRLAM, is constructed for a general pressure based and terrain following vertical coordinate n(p,p,,s,,), where</p><p>n(0,P,,s,,) = 0 and n(p,,s,,,p,,s,,) = 1</p><p>The formulation corresponds to the ECMWF hybrid system. The model is formulated for a spherical coordinate system (lamda, theta), but in the code two metric coefficients (h,,x,,,h,,y,,) have been introduced. This is done to prepare the model for any orthogonal coordinate system or map projection with axes (x,y). </p><p>To represent the vertical variation of the dependent variables (U, V, T and Q), the atmosphere is divided into &quot;nlev&quot; layers. These layers are defined by the pressures at the interfaces between them (the `half-levels&#39;). From the general expression</p><p>p,,k+1/2,, = A,,k+1/2,,(n) + B,,k+1/2,,(n) * p,,s,,(x,y)          for k=0,1,...,nlev</p><p>the vertical surfaces for half-levels are defined. Pure pressure surfaces are obtained for B=0 and pure sigma surfaces for A=0. `full-level&#39; pressure associated with each model level (middle of two half layers) is then determined accordingly.</p><h3 id="**Definition-of-model-levels-in-HARMONIE**-1"><a class="docs-heading-anchor" href="#**Definition-of-model-levels-in-HARMONIE**-1"><strong>Definition of model levels in HARMONIE</strong></a><a class="docs-heading-anchor-permalink" href="#**Definition-of-model-levels-in-HARMONIE**-1" title="Permalink"></a></h3><p>The script <a href="https://hirlam.org/trac/browser/Harmonie/scr/Vertical_levels.pl">Vertical_levels.pl</a> contains definition of vertical levels that have been used in the HIRLAM community for research and/or operational purposes. Currently the default model setup defines 65-level structure as derived by Per Unden, SMHI. Model level definitions for commonly used vertical structures in HARMONIE are listed below.</p><ul><li>FourtyLevel: HIRLAM_40 model levels (same as Hirlam 6.2.1, Nov 2003 - HIRLAM 7.0, 2006 )</li><li>SixtyLevel: HIRLAM-60 model levels (same as Hirlam 7.1, March 2007 - 2012 )</li><li><a href="../MFSixtyLevel.md">MF_60</a>: MF-60 model levels (same as Meteo France AROME since 2010 )</li><li>SixtyfiveLevel: 65 model levels (same as Hirlam 7.4, March 2012 - )</li><li>other levels: Prague<em>87, MF</em>70, 40 (ALADIN-40), ECMWF_60.</li></ul><p>Note that <em>VLEV</em> is the name of the set of A/B coefficients defining your levels set in ecf/config<em>exp.h . There are e.g. more than one definition for 60 levels. To print the levels just run  `scr/Vertical</em>levels.pl `</p><p>Usage: <code>scr/Vertical_levels.pl [VLEV PRINT_OPTION]</code> where:</p><ul><li>VLEV: name of your level definition</li><li>PRINT_OPTION=AHALF: print A coefficients for <em>VLEV</em></li><li>PRINT_OPTION=BHALF: print B coefficients for <em>VLEV</em></li><li>PRINT_OPTION=NLEV: print number of levels for <em>VLEV</em></li><li>PRINT_OPTION=NRFP3S: print NRFP3S namelist values for <em>VLEV</em></li></ul><p>For reference, we provide links detailing structure of the ECMWF <a href="http://www.ecmwf.int/products/data/technical/model_levels/model_def_62.html">62 level</a> (ensemble and seasonal forecast),  <a href="https://www.ecmwf.int/en/forecasts/documentation-and-support/91-model-levels">91 level</a> (deterministic forecast) and the <a href="https://www.ecmwf.int/en/forecasts/documentation-and-support/137-model-levels">137</a>-level deterministic forecast (starting June 25 2013, 38r2)]</p><p>When performing HARMONIE experiment, users can select vertical levels by changing VLEV in the script <a href="https://hirlam.org/trac/browser/Harmonie/ecf/config_exp.h">config_exp.h</a>. If a non-standard level number is to be chosen, the script <a href="https://hirlam.org/trac/browser/Harmonie/scr/Vertical_levels.pl">Vertical_levels.pl</a> needs to be edited to add layer definition.</p><h3 id="**Define-new-eta-levels**-1"><a class="docs-heading-anchor" href="#**Define-new-eta-levels**-1"><strong>Define new eta levels</strong></a><a class="docs-heading-anchor-permalink" href="#**Define-new-eta-levels**-1" title="Permalink"></a></h3><p>A brief description and some code on how to create new eta levels can be found <a href="https://hirlam.org/trac/attachment/wiki/HarmonieSystemDocumentation/VerticalGrid/New_eta.tar.gz">here</a>.</p><p>There is also an <a href="https://www.hirlam.org/nwptools/vlevs.html">interactive tool</a> that can help you in creating a new set of levels.</p><p>The method is based on a program by Pierre Bénard, Meteo France, that is described in <a href="http://www.cnrm.meteo.fr/gmapdoc//spip.php?article62">this gmapdoc article</a>.</p><h3 id="**Relevant-corresponding-data-set-for-different-vertical-structure**-1"><a class="docs-heading-anchor" href="#**Relevant-corresponding-data-set-for-different-vertical-structure**-1"><strong>Relevant corresponding data set for different vertical structure</strong></a><a class="docs-heading-anchor-permalink" href="#**Relevant-corresponding-data-set-for-different-vertical-structure**-1" title="Permalink"></a></h3><p>HARMONIE 3D-VAR and 4DVAR upper air data assimilation needs background error structure function for each given vertical layer structure. It is noted that <a href="https://hirlam.org/trac/browser/trunk/const/jb_data">the structure function data included in the reference HARMONIE repository</a> is only useful for reference configuration. Users that runs 3DVAR/4DVAR are strongly recommended to derive proper structure function data <a href="../HarmonieSystemDocumentation/Structurefunctions.md">following instructions in the HIRLAM wiki</a> using own data archive to avoid improper use of structure function.</p><h2 id="[HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><a class="docs-heading-anchor" href="#[HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1"><a href="../HarmonieSystemDocumentation.md">HARMONIE System Documentation</a></a><a class="docs-heading-anchor-permalink" href="#[HARMONIE-System-Documentation](../HarmonieSystemDocumentation.md)-1" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../ModelDomain/">« Model Domain</a><a class="docs-footer-nextpage" href="../ClimateSimulation/">Climate Simulation »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 30 March 2021 17:28">Tuesday 30 March 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
